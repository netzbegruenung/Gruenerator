/*
 * CSS Cascade Layer Ordering
 * Pre-declare Tailwind's internal layers with "legacy" inserted between
 * base (preflight) and components. This gives us:
 *   base (preflight) → legacy → components → utilities
 *
 * - Preflight provides global resets (box-sizing, border-style, etc.)
 * - Legacy CSS overrides preflight (headings, images stay styled)
 * - Chat component styles sit above legacy
 * - Tailwind utilities always win
 */
@layer base, legacy, components, utilities;

/* ── Legacy styles (including reset) ── */
@import url('./common/reset.css') layer(legacy);
@import url('./common/variables.css') layer(legacy);
@import url('./common/typography.css') layer(legacy);
@import url('./common/global.css') layer(legacy);
@import url('./common/markdown-styles.css') layer(legacy);

@import url('./layout.css') layer(legacy);

@import url('./components/layout/footer.css') layer(legacy);
@import url('./components/layout/header.css') layer(legacy);
@import url('./components/layout/profile-dropdown.css') layer(legacy);
@import url('./components/layout/sidebar.css') layer(legacy);

@import url('./components/ui/button.css') layer(legacy);
@import url('./components/profile/profile-action-buttons.css') layer(legacy);

@import url('./components/ui/quote-form.css') layer(legacy);
@import url('./components/ui/LogLevelSelector.css') layer(legacy);
@import url('./components/help-tooltip.css') layer(legacy);
@import url('./components/common/auto-save-indicator.css') layer(legacy);
@import url('./components/common/recent-texts.css') layer(legacy);
@import url('./components/ui/form-select-modern.css') layer(legacy);
@import url('./components/ui/forms.css') layer(legacy);
@import url('./components/form/form-inputs.css') layer(legacy);
@import url('./components/form/file-upload.css') layer(legacy);
@import url('./components/form/form-image-select.css') layer(legacy);

@import url('./components/actions/advanced-editing.css') layer(legacy);
@import url('./components/actions/linksave.css') layer(legacy);
@import url('./components/actions/collection-actions.css') layer(legacy);

@import url('./features/auth/profile-cards.css') layer(legacy);

@import url('./pages/homepage.css') layer(legacy);
@import url('./pages/notfound.css') layer(legacy);
@import url('./pages/Impressum_datenschutz.css') layer(legacy);

/* ── Full Tailwind (preflight + base + utilities) ── */
@import "tailwindcss";

/* ── Chat package component styles (merges into Tailwind's components layer) ── */
@import "../../../../../packages/chat/src/styles/chat-embedded.css" layer(components);

/*
 * Source paths for Tailwind class detection
 */
@source "../../**/*.{js,ts,jsx,tsx}";
@source "../../../../../packages/chat/src/**/*.{js,ts,jsx,tsx}";

/*
 * Tailwind Theme Configuration
 * Maps existing CSS variables to Tailwind's theme system.
 * Usage: bg-primary-500, text-grey-800, p-md, shadow-lg, etc.
 */
@theme {
  /* Primary Color System */
  --color-primary-50: var(--primary-50);
  --color-primary-100: var(--primary-100);
  --color-primary-200: var(--primary-200);
  --color-primary-300: var(--primary-300);
  --color-primary-400: var(--primary-400);
  --color-primary-500: var(--primary-500);
  --color-primary-600: var(--primary-600);
  --color-primary-700: var(--primary-700);
  --color-primary-800: var(--primary-800);
  --color-primary-900: var(--primary-900);
  --color-primary-950: var(--primary-950);

  /* Secondary Color System */
  --color-secondary-50: var(--secondary-50);
  --color-secondary-100: var(--secondary-100);
  --color-secondary-200: var(--secondary-200);
  --color-secondary-300: var(--secondary-300);
  --color-secondary-400: var(--secondary-400);
  --color-secondary-500: var(--secondary-500);
  --color-secondary-600: var(--secondary-600);
  --color-secondary-700: var(--secondary-700);
  --color-secondary-800: var(--secondary-800);
  --color-secondary-900: var(--secondary-900);
  --color-secondary-950: var(--secondary-950);

  /* Grey Color System */
  --color-grey-50: var(--grey-50);
  --color-grey-100: var(--grey-100);
  --color-grey-200: var(--grey-200);
  --color-grey-300: var(--grey-300);
  --color-grey-400: var(--grey-400);
  --color-grey-500: var(--grey-500);
  --color-grey-600: var(--grey-600);
  --color-grey-700: var(--grey-700);
  --color-grey-800: var(--grey-800);
  --color-grey-900: var(--grey-900);
  --color-grey-950: var(--grey-950);

  /* Neutral Color System (Sand) */
  --color-neutral-500: var(--neutral-500);
  --color-neutral-600: var(--neutral-600);
  --color-neutral-700: var(--neutral-700);

  /* Semantic Colors - Theme-aware */
  --color-background: var(--background-color);
  --color-background-pure: var(--background-color-pure);
  --color-background-alt: var(--background-color-alt);
  --color-background-sand: var(--background-color-sand);
  --color-foreground: var(--font-color);
  --color-foreground-heading: var(--font-color-h);
  --color-link: var(--link-color);
  --color-error: var(--error-red);
  --color-accent: var(--interactive-accent-color);
  --color-disabled: var(--font-color-disabled);

  /* Button Colors */
  --color-button-bg: var(--button-background-color);
  --color-button-text: var(--button-text-color);
  --color-button-hover: var(--button-hover-color);

  /* Form Input Colors */
  --color-input-bg: var(--input-background);
  --color-input-text: var(--input-text-color);
  --color-input-placeholder: var(--input-placeholder-color);

  /* Overlay Colors */
  --color-overlay-sm: var(--overlay-dark-sm);
  --color-overlay-md: var(--overlay-dark-md);
  --color-overlay-lg: var(--overlay-dark-lg);

  /* Additional Semantic Colors */
  --color-text-green: var(--font-color-green);
  --color-hover-alt: var(--hover-color-alt);

  /* Spacing System */
  --spacing-xxs: var(--spacing-xxsmall);
  --spacing-xs: var(--spacing-xsmall);
  --spacing-sm: var(--spacing-small);
  --spacing-md: var(--spacing-medium);
  --spacing-lg: var(--spacing-large);
  --spacing-xl: var(--spacing-xlarge);
  --spacing-2xl: var(--spacing-xxlarge);

  /* Shadows */
  --shadow-sm: var(--shadow-sm);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);

  /* Card Shadows */
  --shadow-card-subtle: var(--card-shadow-subtle);
  --shadow-card-elevated: var(--card-shadow-elevated);
  --shadow-card-floating: var(--card-shadow-floating);
  --shadow-card-dramatic: var(--card-shadow-dramatic);

  /* Border Radius */
  --radius-sm: var(--card-border-radius-small);
  --radius-md: var(--card-border-radius-medium);
  --radius-lg: var(--card-border-radius-large);

  /* Layout Dimensions */
  --spacing-header: var(--header-height);
  --spacing-titlebar: var(--titlebar-height);
  --spacing-sidebar-collapsed: var(--sidebar-collapsed-width);
  --spacing-sidebar-expanded: var(--sidebar-expanded-width);

  /* ── Chat package tokens (@gruenerator/chat) ── */

  /* Primary/Secondary shortcuts (used as bg-primary, text-primary, etc.) */
  --color-primary: var(--primary-500);
  --color-primary-light: #46962b;
  --color-primary-dark: #1a332a;
  --color-secondary: var(--secondary-500);

  /* Surface & Layout */
  --color-surface: #f3f4f6;
  --color-surface-hover: #e5e7eb;
  --color-hover-overlay: rgba(0,0,0,0.05);
  --color-user-bubble: #f0f8f4;
  --color-background-secondary: #f8faf9;
  --color-background-dark: #1a332a;

  /* Text */
  --color-foreground-muted: #666666;
  --color-foreground-dark: #e5e5e5;
  --color-muted-foreground: #666666;

  /* Borders */
  --color-border: #e5e5e5;
  --color-border-dark: #374151;

  /* Card */
  --color-card: #ffffff;
  --color-card-foreground: #1a1a1a;

  /* Accent & Actions */
  --color-accent-hover: #3d8225;
  --color-destructive: #dc2626;

  /* Code Blocks */
  --color-code-block-bg: #111827;
  --color-code-block-fg: #e5e7eb;
  --color-code-inline-bg: #f3f4f6;

  /* Error */
  --color-error-bg: #fef2f2;

  /* Badge Colors */
  --color-badge-purple: #7c3aed;
  --color-badge-purple-bg: rgba(139,92,246,0.1);
  --color-badge-indigo: #4338ca;
  --color-badge-indigo-bg: rgba(99,102,241,0.1);
  --color-badge-indigo-hover: rgba(99,102,241,0.15);

  /* Status Colors */
  --color-status-green: #16a34a;
  --color-status-yellow: #ca8a04;
  --color-status-red: #dc2626;

  /* Muted / Disabled */
  --color-muted-disabled: #9ca3af;

  /* Tool Colors */
  --color-tool-indigo: #4f46e5;
  --color-tool-indigo-bg: #e0e7ff;
  --color-tool-emerald: #059669;
  --color-tool-emerald-bg: #d1fae5;
  --color-tool-orange: #ea580c;
  --color-tool-orange-bg: #ffedd5;
  --color-tool-purple: #9333ea;
  --color-tool-purple-bg: #f3e8ff;

  /* Section / Toggle */
  --color-section-border: #e5e7eb;
  --color-toggle-track: #cbd5e1;

  /* Collection Badge Colors */
  --color-collection-grundsatzprogramm: #059669;
  --color-collection-grundsatzprogramm-bg: rgba(5,150,105,0.1);
  --color-collection-bundestagsfraktion: #2563eb;
  --color-collection-bundestagsfraktion-bg: rgba(37,99,235,0.1);
  --color-collection-gruene-de: #16a34a;
  --color-collection-gruene-de-bg: rgba(22,163,74,0.1);
  --color-collection-kommunalwiki: #d97706;
  --color-collection-kommunalwiki-bg: rgba(217,119,6,0.1);
  --color-collection-web: #ea580c;
  --color-collection-web-bg: rgba(234,88,12,0.1);
  --color-collection-research: #4f46e5;
  --color-collection-research-bg: rgba(79,70,229,0.1);
  --color-collection-landesverband: #0d9488;
  --color-collection-landesverband-bg: rgba(13,148,136,0.1);
  --color-collection-boell: #7c3aed;
  --color-collection-boell-bg: rgba(124,58,237,0.1);
  --color-collection-examples: #ec4899;
  --color-collection-examples-bg: rgba(236,72,153,0.1);
  --color-collection-oesterreich: #0891b2;
  --color-collection-oesterreich-bg: rgba(8,145,178,0.1);

  /* Relevance Indicator Colors */
  --color-relevance-high: #16a34a;
  --color-relevance-medium: #ca8a04;
  --color-relevance-low: #dc2626;

  /* Animations */
  --animate-slide-in: slide-in 0.3s ease-out;
  --animate-fade-in: fade-in 0.2s ease-out;

  /* ── Standard shadcn semantic tokens (required by packages/chat UI primitives) ── */
  --color-primary-foreground: #ffffff;
  --color-secondary-foreground: #ffffff;
  --color-accent-foreground: #1a1a1a;
  --color-muted: #f3f4f6;
  --color-destructive-foreground: #ffffff;
  --color-input: #e5e5e5;
  --color-ring: var(--primary-500);
}

/*
 * Chat package dark-mode overrides (un-layered).
 *
 * The @theme block above hardcodes light-mode values for chat tokens.
 * chat-embedded.css's [data-theme='dark'] sits inside layer(components),
 * which loses to @theme in the cascade. Un-layered styles always win,
 * so these overrides work correctly.
 */
[data-theme='dark'] {
  --color-background-secondary: #242424;
  --color-foreground-muted: #999999;
  --color-muted-foreground: #999999;
  --color-border: #374151;
  --color-card: #242424;
  --color-card-foreground: #e5e5e5;
  --color-surface: rgba(255,255,255,0.05);
  --color-surface-hover: rgba(255,255,255,0.1);
  --color-hover-overlay: rgba(255,255,255,0.05);
  --color-user-bubble: rgba(255,255,255,0.1);
  --color-code-inline-bg: #1f2937;
  --color-error-bg: rgba(153,27,27,0.2);
  --color-badge-purple: #c4b5fd;
  --color-badge-purple-bg: rgba(91,33,182,0.3);
  --color-badge-indigo: #a5b4fc;
  --color-badge-indigo-bg: rgba(67,56,202,0.4);
  --color-badge-indigo-hover: rgba(67,56,202,0.5);
  --color-status-green: #4ade80;
  --color-status-yellow: #facc15;
  --color-status-red: #f87171;
  --color-muted-disabled: #6b7280;
  --color-tool-indigo: #818cf8;
  --color-tool-indigo-bg: rgba(67,56,202,0.3);
  --color-tool-emerald: #34d399;
  --color-tool-emerald-bg: rgba(5,150,105,0.3);
  --color-tool-orange: #fb923c;
  --color-tool-orange-bg: rgba(234,88,12,0.3);
  --color-tool-purple: #c084fc;
  --color-tool-purple-bg: rgba(147,51,234,0.3);
  --color-section-border: #374151;
  --color-toggle-track: #4b5563;
  --color-collection-grundsatzprogramm: #34d399;
  --color-collection-grundsatzprogramm-bg: rgba(5,150,105,0.25);
  --color-collection-bundestagsfraktion: #60a5fa;
  --color-collection-bundestagsfraktion-bg: rgba(37,99,235,0.25);
  --color-collection-gruene-de: #4ade80;
  --color-collection-gruene-de-bg: rgba(22,163,74,0.25);
  --color-collection-kommunalwiki: #fbbf24;
  --color-collection-kommunalwiki-bg: rgba(217,119,6,0.25);
  --color-collection-web: #fb923c;
  --color-collection-web-bg: rgba(234,88,12,0.25);
  --color-collection-research: #818cf8;
  --color-collection-research-bg: rgba(79,70,229,0.25);
  --color-collection-landesverband: #2dd4bf;
  --color-collection-landesverband-bg: rgba(13,148,136,0.25);
  --color-collection-boell: #a78bfa;
  --color-collection-boell-bg: rgba(124,58,237,0.25);
  --color-collection-examples: #f472b6;
  --color-collection-examples-bg: rgba(236,72,153,0.25);
  --color-collection-oesterreich: #22d3ee;
  --color-collection-oesterreich-bg: rgba(8,145,178,0.25);
  --color-relevance-high: #4ade80;
  --color-relevance-medium: #facc15;
  --color-relevance-low: #f87171;
  --color-accent-foreground: #e5e5e5;
  --color-muted: #2a2a2a;
  --color-destructive: #f87171;
  --color-input: #374151;
  --color-ring: #56a17e;
}
