import{P as O,b as at,S as we,n as Wt,p as G,j as h,I as je,q as Re,C as ot,r as dt,B as Oe,A as qe,s as Gt,E as ht,t as Pe}from"./index-DyXXXUoc.js";import{b as Z}from"./vendor-CPnJIadx.js";import{a as pt,S as Le,b as lt,c as Qt,d as Zt}from"./HelpDisplay-BuoYnQy0.js";import{j as Kt,e as Ve,k as $t,l as gt,m as mt,n as Vt,o as Yt}from"./index-02I5EOAM.js";/* empty css                 *//* empty css               */import{W as Xt}from"./WelcomePage-CepWF2ex.js";import{V as Jt}from"./VerifyFeature-QbQAyh2h.js";const ct={400:{title:"Ungültige Anfrage",message:"Die Anfrage konnte nicht verarbeitet werden. Bitte überprüfen Sie Ihre Eingaben und versuchen Sie es erneut."},401:{title:"Authentifizierungsfehler",message:"Es gibt ein Problem mit der API-Authentifizierung. Bitte versuchen Sie es später erneut."},403:{title:"Zugriff verweigert",message:"Keine Berechtigung für diese Aktion. Bitte versuchen Sie es später erneut."},404:{title:"Nicht gefunden",message:"Die angeforderte Ressource konnte nicht gefunden werden. Bitte versuchen Sie es später erneut."},413:{title:"Anfrage zu groß",message:"Ihre Eingabe ist zu umfangreich. Bitte kürzen Sie Ihren Text und versuchen Sie es erneut."},429:{title:"Anfragelimit erreicht",message:"Es wurden zu viele Anfragen gestellt. Bitte warten Sie einen Moment und versuchen Sie es dann erneut."},500:{title:"KI-Dienst nicht verfügbar",message:"Ein unerwarteter Fehler ist in der KI aufgetreten. Bitte versuchen Sie es später erneut."},529:{title:"System überlastet",message:"Der KI-Dienst ist derzeit überlastet. Bitte versuchen Sie es in einigen Minuten erneut."},ERR_NETWORK:{title:"Netzwerkfehler",message:"Keine Verbindung zum Server möglich. Bitte überprüfen Sie Ihre Internetverbindung."},ERR_BAD_REQUEST:{title:"Fehlerhafte Anfrage",message:"Die Anfrage konnte nicht verarbeitet werden. Bitte überprüfen Sie Ihre Eingaben."},ERR_BAD_RESPONSE:{title:"Ungültige Serverantwort",message:"Der Server hat eine ungültige Antwort gesendet. Bitte versuchen Sie es später erneut."},ERR_TIMEOUT:{title:"Zeitüberschreitung",message:"Die Anfrage hat zu lange gedauert. Bitte versuchen Sie es später erneut."},default:{title:"Unerwarteter Fehler",message:"Ein unerwarteter Fehler ist aufgetreten. Bitte versuchen Sie es später erneut."},network_error:{title:"Verbindungsfehler",message:"Die Verbindung zum Server konnte nicht hergestellt werden. Bitte überprüfen Sie Ihre Internetverbindung und versuchen Sie es erneut."}},en=m=>{var a,e,t,c,s,p,x,r;let E;if(m!=null&&m.isAxiosError)E=((a=m.response)==null?void 0:a.status)||m.code||"network_error";else if((e=m==null?void 0:m.error)!=null&&e.type)E=m.error.type;else{if(typeof m=="string")return{title:"Fehler",message:m};E="default"}const T=ct[E]||ct.default;return console.log("[getErrorMessage] Fehlertyp:",E),console.log("[getErrorMessage] Fehlerinfo:",T),{title:T.title,message:T.message,details:((t=m==null?void 0:m.response)==null?void 0:t.data)||((c=m==null?void 0:m.error)==null?void 0:c.message)||(m==null?void 0:m.message),requestId:((s=m==null?void 0:m.headers)==null?void 0:s["request-id"])||((x=(p=m==null?void 0:m.response)==null?void 0:p.headers)==null?void 0:x["request-id"]),status:(r=m==null?void 0:m.response)==null?void 0:r.status}};O.shape({title:O.string.isRequired,message:O.string.isRequired,details:O.string,requestId:O.string,status:O.number}).isRequired,O.string;const tn=(m,E)=>{var e,t,c;console.group("[handleError]"),console.error("Original error:",m),console.log("SetError function provided:",!!E);const T=en(m);console.log("Processed errorInfo:",T);const a={title:T.title,message:T.message,details:T.details||m.message,status:(e=m.response)==null?void 0:e.status,requestId:(c=(t=m.response)==null?void 0:t.headers)==null?void 0:c["request-id"]};console.log("Final error object:",a),E(a),console.groupEnd()},nn=()=>{const[m,E]=Z.useState(!1),[T,a]=Z.useState(""),e=at("zitat_claude"),t=at("dreizeilen_claude"),c=Z.useCallback(async(p,x)=>{const r=p===we.QUOTE?we.QUOTE:we.THREE_LINES;console.log(`Generating text for ${r}:`,x);try{const n=await(r===we.QUOTE?e.submitForm:t.submitForm)(x);if(console.log("Text generation response:",n),r===we.QUOTE){if(!n||!n.quote)throw new Error("Unerwartete Antwortstruktur von der API");return{quote:n.quote,name:x.name,alternatives:n.alternatives||[]}}else{if(!n||!n.mainSlogan||!n.alternatives)throw new Error("Unerwartete Antwortstruktur von der API");return{mainSlogan:n.mainSlogan,alternatives:n.alternatives,searchTerms:n.searchTerms||[]}}}catch(i){throw console.error("Error generating text:",i),i}},[e,t]),s=Z.useCallback(async p=>{var x,r,i,n,l,g,U;E(!0),a("");try{console.log("Generating image with formData:",p);const I=new FormData,y=p.uploadedImage||p.image;if(!y)throw new Error("Kein Bild ausgewählt");const L=y instanceof File?y:new File([y],"image.jpg",{type:y.type||"image/jpeg"});if(I.append("image",L),p.type===we.QUOTE){if(!p.quote||!p.name)throw new Error("Zitat und Name sind erforderlich");I.append("quote",p.quote),I.append("name",p.name)}else{I.append("line1",p.line1||""),I.append("line2",p.line2||""),I.append("line3",p.line3||"");const P={type:p.type,fontSize:p.fontSize||"85",credit:p.credit||"",balkenOffset_0:((x=p.balkenOffset)==null?void 0:x[0])||"50",balkenOffset_1:((r=p.balkenOffset)==null?void 0:r[1])||"-100",balkenOffset_2:((i=p.balkenOffset)==null?void 0:i[2])||"50",balkenGruppe_offset_x:((n=p.balkenGruppenOffset)==null?void 0:n[0])||"0",balkenGruppe_offset_y:((l=p.balkenGruppenOffset)==null?void 0:l[1])||"0",sunflower_offset_x:((g=p.sunflowerOffset)==null?void 0:g[0])||"0",sunflower_offset_y:((U=p.sunflowerOffset)==null?void 0:U[1])||"0"};Object.entries(P).forEach(([b,k])=>{I.append(b,String(k))}),p.colorScheme&&p.colorScheme.forEach((b,k)=>{I.get(`line${k+1}`)&&(I.append(`colors_${k}_background`,b.background),I.append(`colors_${k}_text`,b.text))})}console.log("Sending FormData:",Object.fromEntries(I.entries()));const B=p.type===we.QUOTE?"zitat_canvas":"dreizeilen_canvas";return(await Wt.post(B,I,{headers:{"Content-Type":"multipart/form-data"}})).data.image}catch(I){throw tn(I,a),I}finally{E(!1)}},[]);return{generateText:c,generateImage:s,loading:m,error:T,setError:a}},rn=()=>({renderFormFields:(E,T,a,e={},t)=>{let c=null;return E===G.INPUT&&(c=h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"hidden",id:"type",name:"type",value:t}),h.jsx("h3",{children:h.jsx("label",{htmlFor:"thema",children:"Thema"})}),h.jsx("input",{id:"thema",name:"thema",type:"text",placeholder:"Klimaschutzinitiative",value:T.thema||"",onChange:a,className:e.thema?"error-input":""}),e.thema&&h.jsx("div",{className:"error-message",children:e.thema}),h.jsx("h3",{children:h.jsx("label",{htmlFor:"details",children:"Details"})}),h.jsx("textarea",{id:"details",name:"details",placeholder:"Details zur Initiative, beteiligte Personen und geplante Aktionen.",value:T.details||"",onChange:a,className:e.details?"error-input":""}),e.details&&h.jsx("div",{className:"error-message",children:e.details})]})),(E===G.PREVIEW||E===G.RESULT)&&(T.type==="Zitat"?c=h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:h.jsx("label",{htmlFor:"quote",children:"Zitat"})}),h.jsx("textarea",{id:"quote",name:"quote",value:T.quote||"",onChange:a,className:e.quote?"error-input":"",placeholder:"Gib hier das Zitat ein...",rows:4}),e.quote&&h.jsx("div",{className:"error-message",children:e.quote}),h.jsx("h3",{children:h.jsx("label",{htmlFor:"name",children:"Name"})}),h.jsx("input",{id:"name",type:"text",name:"name",value:T.name||"",onChange:a,className:e.name?"error-input":"",placeholder:"Name der zitierten Person"}),e.name&&h.jsx("div",{className:"error-message",children:e.name})]}):c=h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:h.jsx("label",{htmlFor:"line1",children:"Zeile 1"})}),h.jsx("input",{id:"line1",type:"text",name:"line1",value:T.line1||"",onChange:a,className:e.line1?"error-input":""}),e.line1&&h.jsx("div",{className:"error-message",children:e.line1}),h.jsx("h3",{children:h.jsx("label",{htmlFor:"line2",children:"Zeile 2"})}),h.jsx("input",{id:"line2",type:"text",name:"line2",value:T.line2||"",onChange:a,className:e.line2?"error-input":""}),e.line2&&h.jsx("div",{className:"error-message",children:e.line2}),h.jsx("h3",{children:h.jsx("label",{htmlFor:"line3",children:"Zeile 3"})}),h.jsx("input",{id:"line3",type:"text",name:"line3",value:T.line3||"",onChange:a,className:e.line3?"error-input":""}),e.line3&&h.jsx("div",{className:"error-message",children:e.line3})]})),c}}),bt=({imageUrl:m})=>h.jsxs("a",{href:m,download:"sharepic.png",className:"sharepic-download-button","aria-label":"Sharepic herunterladen",children:[h.jsx(Kt,{style:{marginRight:"10px"}})," Sharepic herunterladen"]});bt.propTypes={imageUrl:O.string.isRequired};const Xe=({loading:m,file:E,handleChange:T,error:a,allowedTypes:e,selectedUnsplashImage:t,isCompact:c})=>{const s=Z.useRef(null),p=i=>{i.preventDefault(),i.stopPropagation(),console.log("File input clicked"),s.current.value="",s.current.click()},x=i=>{var n,l;try{console.log("FileUpload - Files:",i.target.files);const g=(l=(n=i==null?void 0:i.target)==null?void 0:n.files)==null?void 0:l[0];g?(console.log("FileUpload - Selected file:",g),T(g)):console.log("FileUpload - Keine Datei ausgewählt")}catch(g){console.error("FileUpload - Fehler beim Datei-Upload:",g)}},r=()=>{if(m)return h.jsx("span",{children:"Laden..."});if(E){const i=E.name||"Datei",n=i.length>20?i.substring(0,17)+"...":i;return h.jsxs(h.Fragment,{children:[h.jsx(Ve,{}),h.jsx("span",{children:n})]})}return t?h.jsxs(h.Fragment,{children:[h.jsx(Ve,{}),h.jsxs("span",{children:["Unsplash: ",t.photographerName]})]}):h.jsxs(h.Fragment,{children:[h.jsx(Ve,{}),h.jsx("span",{children:"Datei auswählen"})]})};return h.jsxs("div",{className:`button-wrapper ${c?"compact":""}`,children:[h.jsx("input",{id:"fileUpload",type:"file",name:"fileUpload",onChange:x,accept:Array.isArray(e)&&e.length>0?e.join(","):"image/*",ref:s,style:{display:"none"}}),h.jsx("label",{htmlFor:"fileUpload",className:`file-input-text ${m?"loading":""}`,onClick:p,"aria-label":c?"Datei hochladen":void 0,children:r()}),!c&&a&&h.jsx("div",{className:"error-message",children:a})]})};Xe.propTypes={loading:O.bool.isRequired,file:O.object,handleChange:O.func.isRequired,error:O.string,allowedTypes:O.array.isRequired,selectedUnsplashImage:O.object,isCompact:O.bool};Xe.defaultProps={isCompact:!1};const vt=({searchTerms:m})=>{const E=()=>{if(!m||m.length===0)return;const a=`https://unsplash.com/de/s/fotos/${encodeURIComponent(m[0])}?license=free`;window.open(a,"_blank")};return h.jsxs("button",{onClick:E,disabled:!m||m.length===0,className:"unsplash-search-button","aria-label":"Unsplash-Bild",children:[h.jsx($t,{}),"Unsplash-Bild"]})};vt.propTypes={searchTerms:O.arrayOf(O.string)};const xt=({fontSize:m,onControlChange:E})=>h.jsx("div",{className:"font-size-control",children:h.jsx("div",{className:"font-size-buttons",children:je.FONT_SIZE.OPTIONS.map(T=>h.jsx("button",{onClick:()=>E("fontSize",T.value),className:m===T.value?"active":"",children:T.label},T.label))})});xt.propTypes={fontSize:O.number.isRequired,onControlChange:O.func.isRequired};const Je=({balkenOffset:m,onControlChange:E})=>{console.log("BalkenOffsetControl rendered with:",m);const T=(a,e)=>{if(console.log("handleOffsetChange called:",a,e),!Array.isArray(m)){console.warn("Invalid balkenOffset:",m);return}const t=[...m];t[a]=Math.max(-250,Math.min(250,t[a]+e*50)),console.log("New balkenOffset:",t),E("balkenOffset",t)};return h.jsx("div",{className:"balken-offset-control",children:Array.isArray(m)&&m.map((a,e)=>h.jsx("div",{className:"balken-offset-control-item",children:h.jsxs("div",{className:"balken-offset-buttons",children:[h.jsx("button",{onClick:t=>{console.log("Left button clicked for index:",e),t.preventDefault(),t.stopPropagation(),T(e,-1)},children:h.jsx(gt,{})}),h.jsxs("span",{children:[a,"px"]}),h.jsx("button",{onClick:t=>{console.log("Right button clicked for index:",e),t.preventDefault(),t.stopPropagation(),T(e,1)},children:h.jsx(mt,{})})]})},e))})};Je.propTypes={balkenOffset:O.arrayOf(O.number),onControlChange:O.func.isRequired};Je.defaultProps={balkenOffset:Re.DEFAULT_BALKEN_OFFSET};const yt=({colorScheme:m,onControlChange:E})=>h.jsx("div",{className:"color-scheme-control",children:h.jsx("div",{className:"color-scheme-grid",children:je.COLOR_SCHEMES.map((T,a)=>h.jsx("button",{className:`color-scheme-option ${JSON.stringify(m)===JSON.stringify(T.colors)?"active":""}`,onClick:()=>E("colorScheme",T.colors),"aria-label":`Select ${T.name} color scheme`,children:h.jsx("img",{src:T.imageSrc,alt:T.name,className:"color-scheme-image"})},a))})});yt.propTypes={colorScheme:O.arrayOf(O.shape({background:O.string.isRequired,text:O.string.isRequired})).isRequired,onControlChange:O.func.isRequired};const et=({title:m,description:E,offset:T,onOffsetChange:a,step:e})=>{const t=c=>{const s=[...T];switch(c){case"up":s[1]-=e;break;case"down":s[1]+=e;break;case"left":s[0]-=e;break;case"right":s[0]+=e;break}a(s)};return h.jsxs("div",{className:"cross-control",children:[h.jsx("h4",{children:m}),h.jsx("p",{children:E}),h.jsxs("div",{className:"cross-grid",children:[h.jsx("button",{onClick:()=>t("up"),className:"cross-button up",children:h.jsx(Vt,{})}),h.jsx("button",{onClick:()=>t("left"),className:"cross-button left",children:h.jsx(gt,{})}),h.jsx("div",{className:"offset-display",children:h.jsx("span",{className:"offset-value",children:`${T[0]},${T[1]}`})}),h.jsx("button",{onClick:()=>t("right"),className:"cross-button right",children:h.jsx(mt,{})}),h.jsx("button",{onClick:()=>t("down"),className:"cross-button down",children:h.jsx(Yt,{})})]})]})};et.propTypes={title:O.string.isRequired,description:O.string.isRequired,offset:O.arrayOf(O.number).isRequired,onOffsetChange:O.func.isRequired,step:O.number.isRequired};const wt=({offset:m,onOffsetChange:E})=>h.jsx(et,{title:je.LABELS.BALKEN_GRUPPE_TITLE,description:je.LABELS.BALKEN_GRUPPE_DESCRIPTION,offset:m,onOffsetChange:E,step:je.BALKEN_GRUPPE_STEP}),St=({offset:m,onOffsetChange:E})=>h.jsx(et,{title:je.LABELS.SUNFLOWER_TITLE,description:je.LABELS.SUNFLOWER_DESCRIPTION,offset:m,onOffsetChange:E,step:je.SUNFLOWER_STEP});wt.propTypes={offset:O.arrayOf(O.number).isRequired,onOffsetChange:O.func.isRequired};St.propTypes={offset:O.arrayOf(O.number).isRequired,onOffsetChange:O.func.isRequired};const At=({credit:m,onControlChange:E})=>h.jsx("div",{className:"credit-control",children:h.jsx("input",{type:"text",id:"credit",value:m,onChange:T=>E("credit",T.target.value),placeholder:"www.gruene-musterdorf.de"})});At.propTypes={credit:O.string,onControlChange:O.func.isRequired};O.number,O.arrayOf(O.number),O.arrayOf(O.shape({background:O.string.isRequired,text:O.string.isRequired})),O.arrayOf(O.number),O.arrayOf(O.number),O.func.isRequired,O.string;const Et=({balkenOffset:m,balkenGruppenOffset:E,sunflowerOffset:T,onBalkenOffsetChange:a,onBalkenGruppenOffsetChange:e,onSonnenblumenOffsetChange:t})=>h.jsxs("div",{className:"advanced-editing-section",children:[h.jsx("h3",{children:"Erweiterter Editor (für Expert*innen)"}),h.jsxs("div",{className:"advanced-controls-grid",children:[h.jsxs("div",{className:"control-item",children:[h.jsx("h4",{children:"Einzelne Balken verschieben"}),h.jsx("p",{children:"Passe die Position jedes einzelnen Balkens individuell an."}),h.jsx(Je,{balkenOffset:m,onControlChange:(c,s)=>{console.log("AdvancedEditingSection onControlChange:",c,s),a(s)}})]}),h.jsx("div",{className:"control-item",children:h.jsx(wt,{offset:E,onOffsetChange:e})}),h.jsx("div",{className:"control-item",children:h.jsx(St,{offset:T,onOffsetChange:t})})]})]});Et.propTypes={balkenOffset:O.arrayOf(O.number).isRequired,balkenGruppenOffset:O.arrayOf(O.number).isRequired,sunflowerOffset:O.arrayOf(O.number).isRequired,onBalkenOffsetChange:O.func.isRequired,onBalkenGruppenOffsetChange:O.func.isRequired,onSonnenblumenOffsetChange:O.func.isRequired};const jt=({errors:m})=>Object.keys(m).length===0?null:h.jsx("div",{className:"form-errors",role:"alert","aria-live":"assertive",children:Object.entries(m).map(([E,T])=>h.jsx("p",{className:"error-message",children:T},E))});jt.propTypes={errors:O.object};const Tt=({isExpanded:m,onClick:E})=>{const T=a=>{a.preventDefault(),a.stopPropagation(),E()};return h.jsxs("div",{className:"alternatives-button-wrapper",children:[h.jsx(ot,{in:!m,timeout:300,classNames:"alternatives-fade",unmountOnExit:!0,children:h.jsx("button",{type:"button",className:"alternatives-button",onClick:T,"aria-expanded":m,"aria-label":"Alternativen anzeigen",children:"Alternativen anzeigen"})}),h.jsx(ot,{in:m,timeout:300,classNames:"alternatives-fade",unmountOnExit:!0,children:h.jsx("button",{type:"button",className:"alternatives-button",onClick:T,"aria-expanded":m,"aria-label":"Ausblenden",children:"Ausblenden"})})]})};Tt.propTypes={isExpanded:O.bool.isRequired,onClick:O.func.isRequired};const tt=({currentSlogan:m,alternatives:E,onSloganSelect:T})=>{if(!E||E.length===0)return null;const a=e=>e.quote?h.jsx("div",{className:"slogan-item-content",children:h.jsx("p",{children:e.quote})}):h.jsxs("div",{className:"slogan-item-content",children:[e.line1&&h.jsx("p",{children:e.line1}),e.line2&&h.jsx("p",{children:e.line2}),e.line3&&h.jsx("p",{children:e.line3})]});return h.jsxs("div",{className:"slogan-alternatives",children:[h.jsx("div",{className:"slogan-alternatives-header",children:h.jsx("h4",{className:"slogan-alternatives-title",children:"Alternative Vorschläge"})}),h.jsx("div",{className:"slogan-list",children:E.map((e,t)=>h.jsx("div",{className:"slogan-item",onClick:()=>T(e),children:a(e)},t))}),h.jsx("div",{className:"slogan-alternatives-header",children:h.jsx("h4",{className:"slogan-alternatives-title",children:"Aktuelle Auswahl"})}),h.jsx("div",{className:"slogan-item current",children:a(m)})]})};tt.propTypes={currentSlogan:O.oneOfType([O.shape({line1:O.string,line2:O.string,line3:O.string}),O.shape({quote:O.string})]).isRequired,alternatives:O.arrayOf(O.oneOfType([O.shape({line1:O.string,line2:O.string,line3:O.string}),O.shape({quote:O.string})])).isRequired,onSloganSelect:O.func.isRequired};const Ft=({title:m,children:E,onSubmit:T,onBack:a,loading:e,success:t,error:c,formErrors:s={},generatedContent:p,fileUploadProps:x,useDownloadButton:r=!1,showBackButton:i=!1,submitButtonText:n=Oe.SUBMIT,fontSize:l,balkenOffset:g,colorScheme:U,onControlChange:I,isSubmitting:y,currentSubmittingStep:L,balkenGruppenOffset:B,sunflowerOffset:N,credit:P,helpContent:b})=>{const{state:{currentStep:k,isLottieVisible:u,generatedImageSrc:f,isAdvancedEditingOpen:w,formData:v,selectedImage:A},toggleAdvancedEditing:F,handleChange:S}=dt();Z.useEffect(()=>{console.log("BaseForm: Current step changed to",k)},[k]),Z.useEffect(()=>{console.log("BaseForm props update:",{currentStep:k,isSubmitting:y,currentSubmittingStep:L,isLottieVisible:u})},[k,y,L,u]),Z.useEffect(()=>{if(w){const q=document.querySelector(".advanced-editing-section");q&&q.scrollIntoView({behavior:"smooth",block:"start"})}},[w]);const C=Z.useMemo(()=>({showBack:i,submitText:n,loading:e,success:t}),[i,n,e,t]),d=()=>h.jsxs("div",{className:"button-container",children:[C.showBack&&h.jsx("div",{className:"button-wrapper",children:h.jsx(Le,{onClick:a,text:Oe.BACK,className:"back-button",ariaLabel:qe.BACK})}),k!==G.RESULT&&h.jsx("div",{className:"button-wrapper",children:h.jsx(Le,{onClick:T,loading:C.loading,success:C.success,text:C.submitText,icon:h.jsx(lt,{}),className:"form-button",ariaLabel:qe.SUBMIT})})]}),o=()=>h.jsxs("div",{className:"input-fields-wrapper",children:[E,v.type==="Zitat"&&h.jsxs("div",{className:"form-group",children:[h.jsx("h3",{children:"Zitiert wird"}),h.jsx("input",{type:"text",id:"name",name:"name",value:v.name||"",onChange:S,placeholder:"Maxi Mustermensch",required:!0}),s.name&&h.jsx("span",{className:"error-message",children:s.name})]}),d()]}),M=()=>h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"input-fields-wrapper",children:E}),h.jsxs("div",{className:"action-buttons three-buttons",children:[h.jsx("div",{className:"button-wrapper",children:h.jsx(Tt,{...x.alternativesButtonProps,buttonText:v.type==="Zitat"?"Andere Zitate":"Anderer Slogan"})}),v.type!=="Zitat"&&h.jsx("div",{className:"button-wrapper",children:h.jsx(vt,{searchTerms:v.searchTerms})}),h.jsx("div",{className:"button-wrapper",children:h.jsx(Xe,{...x,buttonText:"Upload"})})]}),h.jsx("div",{className:"button-container",children:d()})]}),j=Z.useCallback(()=>{const q=new URL(window.location.origin+"/socialmedia");q.searchParams.append("thema",v.thema||""),q.searchParams.append("details",v.details||""),window.open(q.toString(),"_blank")},[v]),R=()=>h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"image-modification-controls",children:[h.jsxs("div",{className:"left-column",children:[v.type==="Zitat"?h.jsx(h.Fragment,{children:h.jsxs("div",{className:"textzeilen-group",children:[h.jsx("h3",{children:"Zitat"}),h.jsx("p",{children:"Hier änderst du das Zitat und den Namen"}),h.jsx("div",{className:"input-fields-wrapper",children:E})]})}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"textzeilen-group",children:[h.jsx("h3",{children:"Textzeilen"}),h.jsx("p",{children:"Hier änderst du den Text auf dem Bild"}),h.jsx("div",{className:"input-fields-wrapper",children:E})]}),h.jsxs("div",{className:"absender-group",children:[h.jsx("h3",{children:"Absender"}),h.jsx("p",{children:"Du kannst hier optional einen Absender einfügen oder das Feld frei lassen."}),h.jsx(At,{credit:P,onControlChange:I})]})]}),h.jsx(Le,{onClick:T,loading:e,success:t,text:"Aktualisieren",icon:h.jsx(lt,{}),className:"form-button",ariaLabel:qe.SUBMIT})]}),h.jsxs("div",{className:"right-column",children:[v.type!=="Zitat"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"color-controls",children:[h.jsx("h3",{children:"Farbschema"}),h.jsx("p",{children:"Wähle eine von vier Farbkombinationen für dein Sharepic."}),h.jsx(yt,{colorScheme:U,onControlChange:I})]}),h.jsxs("div",{className:"font-size-group",children:[h.jsx("h3",{children:"Schriftgröße"}),h.jsx("p",{children:"Passe die Größe des Textes auf deinem Sharepic an."}),h.jsx(xt,{fontSize:l,onControlChange:I})]})]}),h.jsxs("div",{className:"social-media-group",children:[h.jsx("h3",{children:"Social Media"}),h.jsx("p",{children:"Erstelle passende Beitragstexte für deine Social-Media-Kanäle."}),h.jsx(Le,{onClick:j,text:"Beitragstext erstellen",className:"social-media-button",ariaLabel:qe.SOCIAL_MEDIA})]})]})]}),v.type!=="Zitat"&&h.jsx("div",{className:"advanced-editing-button-container",children:h.jsx(Le,{text:w?"Erweiterte Bildbearbeitung schließen":"Erweiterte Bildbearbeitung",className:`advanced-editing-button ${w?"open":""}`,onClick:F,icon:w?h.jsx(Qt,{}):h.jsx(Zt,{})})})]}),H=()=>{const q=b?h.jsx(pt,{content:b.content,tips:b.tips}):null;return h.jsxs(h.Fragment,{children:[q,(()=>{switch(k){case G.INPUT:return o();case G.PREVIEW:return M();case G.RESULT:return R();default:return null}})()]})},z=Z.useMemo(()=>{var q,D;return!f&&p?h.jsx("div",{className:"display-content",children:p}):h.jsxs("div",{className:"display-content",style:{fontSize:l},children:[k===G.PREVIEW&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"preview-image-container",children:[v.uploadedImage&&h.jsx("img",{src:URL.createObjectURL(v.uploadedImage),alt:"Vorschau",className:"preview-image"}),A&&h.jsx("img",{src:A.urls.regular,alt:A.alt_description||"Unsplash Vorschau",className:"preview-image"})]}),((q=x==null?void 0:x.alternativesButtonProps)==null?void 0:q.isExpanded)&&((D=v.sloganAlternatives)==null?void 0:D.length)>0&&h.jsxs("div",{className:"alternatives-section",children:[h.jsx("h4",{children:"Wähle einen passenden Text für dein Sharepic aus"}),h.jsx(tt,{currentSlogan:v.type==="Zitat"?{quote:v.quote}:{line1:v.line1,line2:v.line2,line3:v.line3},alternatives:v.sloganAlternatives,onSloganSelect:v.type==="Zitat"?_=>{S({target:{name:"quote",value:_.quote}})}:x.alternativesButtonProps.onSloganSelect})]})]}),k===G.RESULT&&typeof f=="string"&&f.startsWith("data:image")&&h.jsxs("div",{className:"sticky-sharepic-container",children:[h.jsx("img",{src:f,alt:"Generiertes Sharepic",className:"sticky-sharepic"}),h.jsx("div",{className:"button-container",style:{fontSize:"initial"},children:r&&h.jsx(bt,{imageUrl:f})})]})]})},[k,f,p,r,l,v,A]);return h.jsxs("div",{className:`sharepic-base-container ${p?"with-content":""} ${k===G.RESULT?"result-step":""}`,children:[h.jsxs("div",{className:"form-container",children:[h.jsxs("form",{onSubmit:q=>{q.preventDefault(),T()},children:[h.jsxs("div",{className:`form-content ${p?"with-generated-content":""}`,children:[H(),Object.keys(s).length>0&&h.jsx(jt,{errors:s})]}),k===G.RESULT&&h.jsx(h.Fragment,{children:w&&h.jsx(Et,{balkenOffset:g,balkenGruppenOffset:B,sunflowerOffset:N,onBalkenOffsetChange:q=>I("balkenOffset",q),onBalkenGruppenOffsetChange:q=>I("balkenGruppenOffset",q),onSonnenblumenOffsetChange:q=>I("sunflowerOffset",q)})})]}),c&&!Object.keys(s).length&&h.jsx("p",{role:"alert","aria-live":"assertive",className:"error-message",children:c})]}),h.jsxs("div",{className:"display-container",children:[h.jsx("h3",{children:(b==null?void 0:b.title)||m}),z]})]})};Ft.propTypes={title:O.string.isRequired,children:O.node.isRequired,onSubmit:O.func.isRequired,onBack:O.func,loading:O.bool.isRequired,success:O.bool,error:O.string,formErrors:O.object,generatedContent:O.oneOfType([O.string,O.node]),fileUploadProps:O.shape({loading:O.bool,file:O.object,handleChange:O.func,error:O.string,allowedTypes:O.arrayOf(O.string),buttonText:O.string,unsplashButtonText:O.string,showAlternativesButton:O.bool,alternativesButtonProps:O.shape({isExpanded:O.bool,onClick:O.func,onSloganSelect:O.func})}),useDownloadButton:O.bool,showBackButton:O.bool,submitButtonText:O.string,fontSize:O.number.isRequired,balkenOffset:O.arrayOf(O.number).isRequired,colorScheme:O.arrayOf(O.shape({background:O.string.isRequired,text:O.string.isRequired})).isRequired,onControlChange:O.func.isRequired,isSubmitting:O.bool,currentSubmittingStep:O.oneOf(Object.values(G)),balkenGruppenOffset:O.arrayOf(O.number).isRequired,sunflowerOffset:O.arrayOf(O.number).isRequired,credit:O.string,helpContent:O.shape({title:O.string,content:O.string,tips:O.arrayOf(O.string)})};function sn(m,E){return E.forEach(function(T){T&&typeof T!="string"&&!Array.isArray(T)&&Object.keys(T).forEach(function(a){if(a!=="default"&&!(a in m)){var e=Object.getOwnPropertyDescriptor(T,a);Object.defineProperty(m,a,e.get?e:{enumerable:!0,get:function(){return T[a]}})}})}),Object.freeze(m)}function Ut(m,E){return new Promise(function(T,a){let e;return an(m).then(function(t){try{return e=t,T(new Blob([E.slice(0,2),e,E.slice(2)],{type:"image/jpeg"}))}catch(c){return a(c)}},a)})}const an=m=>new Promise((E,T)=>{const a=new FileReader;a.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let c=0;if(t.getUint16(c)!==65496)return T("not a valid JPEG");for(c+=2;;){const s=t.getUint16(c);if(s===65498)break;const p=t.getUint16(c+2);if(s===65505&&t.getUint32(c+4)===1165519206){const x=c+10;let r;switch(t.getUint16(x)){case 18761:r=!0;break;case 19789:r=!1;break;default:return T("TIFF header contains invalid endian")}if(t.getUint16(x+2,r)!==42)return T("TIFF header contains invalid version");const i=t.getUint32(x+4,r),n=x+i+2+12*t.getUint16(x+i,r);for(let l=x+i+2;l<n;l+=12)if(t.getUint16(l,r)==274){if(t.getUint16(l+2,r)!==3)return T("Orientation data type is invalid");if(t.getUint32(l+4,r)!==1)return T("Orientation data count is invalid");t.setUint16(l+8,1,r);break}return E(e.slice(c,c+2+p))}c+=2+p}return E(new Blob)}),a.readAsArrayBuffer(m)});var He={},on={get exports(){return He},set exports(m){He=m}};(function(m){var E,T,a={};on.exports=a,a.parse=function(e,t){for(var c=a.bin.readUshort,s=a.bin.readUint,p=0,x={},r=new Uint8Array(e),i=r.length-4;s(r,i)!=101010256;)i--;p=i,p+=4;var n=c(r,p+=4);c(r,p+=2);var l=s(r,p+=2),g=s(r,p+=4);p+=4,p=g;for(var U=0;U<n;U++){s(r,p),p+=4,p+=4,p+=4,s(r,p+=4),l=s(r,p+=4);var I=s(r,p+=4),y=c(r,p+=4),L=c(r,p+2),B=c(r,p+4);p+=6;var N=s(r,p+=8);p+=4,p+=y+L+B,a._readLocal(r,N,x,l,I,t)}return x},a._readLocal=function(e,t,c,s,p,x){var r=a.bin.readUshort,i=a.bin.readUint;i(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);i(e,t+=2),i(e,t+=4),t+=4;var l=r(e,t+=8),g=r(e,t+=2);t+=2;var U=a.bin.readUTF8(e,t,l);if(t+=l,t+=g,x)c[U]={size:p,csize:s};else{var I=new Uint8Array(e.buffer,t);if(n==0)c[U]=new Uint8Array(I.buffer.slice(t,t+s));else{if(n!=8)throw"unknown compression method: "+n;var y=new Uint8Array(p);a.inflateRaw(I,y),c[U]=y}}},a.inflateRaw=function(e,t){return a.F.inflate(e,t)},a.inflate=function(e,t){return e[0],e[1],a.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},a.deflate=function(e,t){t==null&&(t={level:6});var c=0,s=new Uint8Array(50+Math.floor(1.1*e.length));s[c]=120,s[c+1]=156,c+=2,c=a.F.deflateRaw(e,s,c,t.level);var p=a.adler(e,0,e.length);return s[c+0]=p>>>24&255,s[c+1]=p>>>16&255,s[c+2]=p>>>8&255,s[c+3]=p>>>0&255,new Uint8Array(s.buffer,0,c+4)},a.deflateRaw=function(e,t){t==null&&(t={level:6});var c=new Uint8Array(50+Math.floor(1.1*e.length)),s=a.F.deflateRaw(e,c,s,t.level);return new Uint8Array(c.buffer,0,s)},a.encode=function(e,t){t==null&&(t=!1);var c=0,s=a.bin.writeUint,p=a.bin.writeUshort,x={};for(var r in e){var i=!a._noNeed(r)&&!t,n=e[r],l=a.crc.crc(n,0,n.length);x[r]={cpr:i,usize:n.length,crc:l,file:i?a.deflateRaw(n):n}}for(var r in x)c+=x[r].file.length+30+46+2*a.bin.sizeUTF8(r);c+=22;var g=new Uint8Array(c),U=0,I=[];for(var r in x){var y=x[r];I.push(U),U=a._writeHeader(g,U,r,y,0)}var L=0,B=U;for(var r in x)y=x[r],I.push(U),U=a._writeHeader(g,U,r,y,1,I[L++]);var N=U-B;return s(g,U,101010256),U+=4,p(g,U+=4,L),p(g,U+=2,L),s(g,U+=2,N),s(g,U+=4,B),U+=4,U+=2,g.buffer},a._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},a._writeHeader=function(e,t,c,s,p,x){var r=a.bin.writeUint,i=a.bin.writeUshort,n=s.file;return r(e,t,p==0?67324752:33639248),t+=4,p==1&&(t+=2),i(e,t,20),i(e,t+=2,0),i(e,t+=2,s.cpr?8:0),r(e,t+=2,0),r(e,t+=4,s.crc),r(e,t+=4,n.length),r(e,t+=4,s.usize),i(e,t+=4,a.bin.sizeUTF8(c)),i(e,t+=2,0),t+=2,p==1&&(t+=2,t+=2,r(e,t+=6,x),t+=4),t+=a.bin.writeUTF8(e,t,c),p==0&&(e.set(n,t),t+=n.length),t},a.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var c=t,s=0;s<8;s++)1&c?c=3988292384^c>>>1:c>>>=1;e[t]=c}return e}(),update:function(e,t,c,s){for(var p=0;p<s;p++)e=a.crc.table[255&(e^t[c+p])]^e>>>8;return e},crc:function(e,t,c){return 4294967295^a.crc.update(4294967295,e,t,c)}},a.adler=function(e,t,c){for(var s=1,p=0,x=t,r=t+c;x<r;){for(var i=Math.min(x+5552,r);x<i;)p+=s+=e[x++];s%=65521,p%=65521}return p<<16|s},a.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,c){e[t]=255&c,e[t+1]=c>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,c){e[t]=255&c,e[t+1]=c>>8&255,e[t+2]=c>>16&255,e[t+3]=c>>24&255},readASCII:function(e,t,c){for(var s="",p=0;p<c;p++)s+=String.fromCharCode(e[t+p]);return s},writeASCII:function(e,t,c){for(var s=0;s<c.length;s++)e[t+s]=c.charCodeAt(s)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,c){for(var s,p="",x=0;x<c;x++)p+="%"+a.bin.pad(e[t+x].toString(16));try{s=decodeURIComponent(p)}catch{return a.bin.readASCII(e,t,c)}return s},writeUTF8:function(e,t,c){for(var s=c.length,p=0,x=0;x<s;x++){var r=c.charCodeAt(x);if((4294967168&r)==0)e[t+p]=r,p++;else if((4294965248&r)==0)e[t+p]=192|r>>6,e[t+p+1]=128|r>>0&63,p+=2;else if((4294901760&r)==0)e[t+p]=224|r>>12,e[t+p+1]=128|r>>6&63,e[t+p+2]=128|r>>0&63,p+=3;else{if((4292870144&r)!=0)throw"e";e[t+p]=240|r>>18,e[t+p+1]=128|r>>12&63,e[t+p+2]=128|r>>6&63,e[t+p+3]=128|r>>0&63,p+=4}}return p},sizeUTF8:function(e){for(var t=e.length,c=0,s=0;s<t;s++){var p=e.charCodeAt(s);if((4294967168&p)==0)c++;else if((4294965248&p)==0)c+=2;else if((4294901760&p)==0)c+=3;else{if((4292870144&p)!=0)throw"e";c+=4}}return c}},a.F={},a.F.deflateRaw=function(e,t,c,s){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][s],x=a.F.U,r=a.F._goodIndex;a.F._hash;var i=a.F._putsE,n=0,l=c<<3,g=0,U=e.length;if(s==0){for(;n<U;)i(t,l,n+(v=Math.min(65535,U-n))==U?1:0),l=a.F._copyExact(e,n,v,t,l+8),n+=v;return l>>>3}var I=x.lits,y=x.strt,L=x.prev,B=0,N=0,P=0,b=0,k=0,u=0;for(U>2&&(y[u=a.F._hash(e,0)]=0),n=0;n<U;n++){if(k=u,n+1<U-2){u=a.F._hash(e,n+1);var f=n+1&32767;L[f]=y[u],y[u]=f}if(g<=n){(B>14e3||N>26697)&&U-n>100&&(g<n&&(I[B]=n-g,B+=2,g=n),l=a.F._writeBlock(n==U-1||g==U?1:0,I,B,b,e,P,n-P,t,l),B=N=b=0,P=n);var w=0;n<U-2&&(w=a.F._bestMatch(e,n,L,k,Math.min(p[2],U-n),p[3]));var v=w>>>16,A=65535&w;if(w!=0){A=65535&w;var F=r(v=w>>>16,x.of0);x.lhst[257+F]++;var S=r(A,x.df0);x.dhst[S]++,b+=x.exb[F]+x.dxb[S],I[B]=v<<23|n-g,I[B+1]=A<<16|F<<8|S,B+=2,g=n+v}else x.lhst[e[n]]++;N++}}for(P==n&&e.length!=0||(g<n&&(I[B]=n-g,B+=2,g=n),l=a.F._writeBlock(1,I,B,b,e,P,n-P,t,l),B=0,N=0,B=N=b=0,P=n);(7&l)!=0;)l++;return l>>>3},a.F._bestMatch=function(e,t,c,s,p,x){var r=32767&t,i=c[r],n=r-i+32768&32767;if(i==r||s!=a.F._hash(e,t-n))return 0;for(var l=0,g=0,U=Math.min(32767,t);n<=U&&--x!=0&&i!=r;){if(l==0||e[t+l]==e[t+l-n]){var I=a.F._howLong(e,t,n);if(I>l){if(g=n,(l=I)>=p)break;n+2<I&&(I=n+2);for(var y=0,L=0;L<I-2;L++){var B=t-n+L+32768&32767,N=B-c[B]+32768&32767;N>y&&(y=N,i=B)}}}n+=(r=i)-(i=c[r])+32768&32767}return l<<16|g},a.F._howLong=function(e,t,c){if(e[t]!=e[t-c]||e[t+1]!=e[t+1-c]||e[t+2]!=e[t+2-c])return 0;var s=t,p=Math.min(e.length,t+258);for(t+=3;t<p&&e[t]==e[t-c];)t++;return t-s},a.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},a.saved=0,a.F._writeBlock=function(e,t,c,s,p,x,r,i,n){var l,g,U,I,y,L,B,N,P,b=a.F.U,k=a.F._putsF,u=a.F._putsE;b.lhst[256]++,g=(l=a.F.getTrees())[0],U=l[1],I=l[2],y=l[3],L=l[4],B=l[5],N=l[6],P=l[7];var f=32+((n+3&7)==0?0:8-(n+3&7))+(r<<3),w=s+a.F.contSize(b.fltree,b.lhst)+a.F.contSize(b.fdtree,b.dhst),v=s+a.F.contSize(b.ltree,b.lhst)+a.F.contSize(b.dtree,b.dhst);v+=14+3*B+a.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var A=0;A<286;A++)b.lhst[A]=0;for(A=0;A<30;A++)b.dhst[A]=0;for(A=0;A<19;A++)b.ihst[A]=0;var F=f<w&&f<v?0:w<v?1:2;if(k(i,n,e),k(i,n+1,F),n+=3,F==0){for(;(7&n)!=0;)n++;n=a.F._copyExact(p,x,r,i,n)}else{var S,C;if(F==1&&(S=b.fltree,C=b.fdtree),F==2){a.F.makeCodes(b.ltree,g),a.F.revCodes(b.ltree,g),a.F.makeCodes(b.dtree,U),a.F.revCodes(b.dtree,U),a.F.makeCodes(b.itree,I),a.F.revCodes(b.itree,I),S=b.ltree,C=b.dtree,u(i,n,y-257),u(i,n+=5,L-1),u(i,n+=5,B-4),n+=4;for(var d=0;d<B;d++)u(i,n+3*d,b.itree[1+(b.ordr[d]<<1)]);n+=3*B,n=a.F._codeTiny(N,b.itree,i,n),n=a.F._codeTiny(P,b.itree,i,n)}for(var o=x,M=0;M<c;M+=2){for(var j=t[M],R=j>>>23,H=o+(8388607&j);o<H;)n=a.F._writeLit(p[o++],S,i,n);if(R!=0){var z=t[M+1],q=z>>16,D=z>>8&255,_=255&z;u(i,n=a.F._writeLit(257+D,S,i,n),R-b.of0[D]),n+=b.exb[D],k(i,n=a.F._writeLit(_,C,i,n),q-b.df0[_]),n+=b.dxb[_],o+=R}}n=a.F._writeLit(256,S,i,n)}return n},a.F._copyExact=function(e,t,c,s,p){var x=p>>>3;return s[x]=c,s[x+1]=c>>>8,s[x+2]=255-s[x],s[x+3]=255-s[x+1],x+=4,s.set(new Uint8Array(e.buffer,t,c),x),p+(c+4<<3)},a.F.getTrees=function(){for(var e=a.F.U,t=a.F._hufTree(e.lhst,e.ltree,15),c=a.F._hufTree(e.dhst,e.dtree,15),s=[],p=a.F._lenCodes(e.ltree,s),x=[],r=a.F._lenCodes(e.dtree,x),i=0;i<s.length;i+=2)e.ihst[s[i]]++;for(i=0;i<x.length;i+=2)e.ihst[x[i]]++;for(var n=a.F._hufTree(e.ihst,e.itree,7),l=19;l>4&&e.itree[1+(e.ordr[l-1]<<1)]==0;)l--;return[t,c,n,p,r,l,s,x]},a.F.getSecond=function(e){for(var t=[],c=0;c<e.length;c+=2)t.push(e[c+1]);return t},a.F.nonZero=function(e){for(var t="",c=0;c<e.length;c+=2)e[c+1]!=0&&(t+=(c>>1)+",");return t},a.F.contSize=function(e,t){for(var c=0,s=0;s<t.length;s++)c+=t[s]*e[1+(s<<1)];return c},a.F._codeTiny=function(e,t,c,s){for(var p=0;p<e.length;p+=2){var x=e[p],r=e[p+1];s=a.F._writeLit(x,t,c,s);var i=x==16?2:x==17?3:7;x>15&&(a.F._putsE(c,s,r,i),s+=i)}return s},a.F._lenCodes=function(e,t){for(var c=e.length;c!=2&&e[c-1]==0;)c-=2;for(var s=0;s<c;s+=2){var p=e[s+1],x=s+3<c?e[s+3]:-1,r=s+5<c?e[s+5]:-1,i=s==0?-1:e[s-1];if(p==0&&x==p&&r==p){for(var n=s+5;n+2<c&&e[n+2]==p;)n+=2;(l=Math.min(n+1-s>>>1,138))<11?t.push(17,l-3):t.push(18,l-11),s+=2*l-2}else if(p==i&&x==p&&r==p){for(n=s+5;n+2<c&&e[n+2]==p;)n+=2;var l=Math.min(n+1-s>>>1,6);t.push(16,l-3),s+=2*l-2}else t.push(p,0)}return c>>>1},a.F._hufTree=function(e,t,c){var s=[],p=e.length,x=t.length,r=0;for(r=0;r<x;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<p;r++)e[r]!=0&&s.push({lit:r,f:e[r]});var i=s.length,n=s.slice(0);if(i==0)return 0;if(i==1){var l=s[0].lit;return n=l==0?1:0,t[1+(l<<1)]=1,t[1+(n<<1)]=1,1}s.sort(function(N,P){return N.f-P.f});var g=s[0],U=s[1],I=0,y=1,L=2;for(s[0]={lit:-1,f:g.f+U.f,l:g,r:U,d:0};y!=i-1;)g=I!=y&&(L==i||s[I].f<s[L].f)?s[I++]:s[L++],U=I!=y&&(L==i||s[I].f<s[L].f)?s[I++]:s[L++],s[y++]={lit:-1,f:g.f+U.f,l:g,r:U};var B=a.F.setDepth(s[y-1],0);for(B>c&&(a.F.restrictDepth(n,c,B),B=c),r=0;r<i;r++)t[1+(n[r].lit<<1)]=n[r].d;return B},a.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(a.F.setDepth(e.l,t+1),a.F.setDepth(e.r,t+1))},a.F.restrictDepth=function(e,t,c){var s=0,p=1<<c-t,x=0;for(e.sort(function(i,n){return n.d==i.d?i.f-n.f:n.d-i.d}),s=0;s<e.length&&e[s].d>t;s++){var r=e[s].d;e[s].d=t,x+=p-(1<<c-r)}for(x>>>=c-t;x>0;)(r=e[s].d)<t?(e[s].d++,x-=1<<t-r-1):s++;for(;s>=0;s--)e[s].d==t&&x<0&&(e[s].d--,x++);x!=0&&console.log("debt left")},a.F._goodIndex=function(e,t){var c=0;return t[16|c]<=e&&(c|=16),t[8|c]<=e&&(c|=8),t[4|c]<=e&&(c|=4),t[2|c]<=e&&(c|=2),t[1|c]<=e&&(c|=1),c},a.F._writeLit=function(e,t,c,s){return a.F._putsF(c,s,t[e<<1]),s+t[1+(e<<1)]},a.F.inflate=function(e,t){var c=Uint8Array;if(e[0]==3&&e[1]==0)return t||new c(0);var s=a.F,p=s._bitsF,x=s._bitsE,r=s._decodeTiny,i=s.makeCodes,n=s.codes2map,l=s._get17,g=s.U,U=t==null;U&&(t=new c(e.length>>>2<<3));for(var I,y,L=0,B=0,N=0,P=0,b=0,k=0,u=0,f=0,w=0;L==0;)if(L=p(e,w,1),B=p(e,w+1,2),w+=3,B!=0){if(U&&(t=a.F._check(t,f+(1<<17))),B==1&&(I=g.flmap,y=g.fdmap,k=511,u=31),B==2){N=x(e,w,5)+257,P=x(e,w+5,5)+1,b=x(e,w+10,4)+4,w+=14;for(var v=0;v<38;v+=2)g.itree[v]=0,g.itree[v+1]=0;var A=1;for(v=0;v<b;v++){var F=x(e,w+3*v,3);g.itree[1+(g.ordr[v]<<1)]=F,F>A&&(A=F)}w+=3*b,i(g.itree,A),n(g.itree,A,g.imap),I=g.lmap,y=g.dmap,w=r(g.imap,(1<<A)-1,N+P,e,w,g.ttree);var S=s._copyOut(g.ttree,0,N,g.ltree);k=(1<<S)-1;var C=s._copyOut(g.ttree,N,P,g.dtree);u=(1<<C)-1,i(g.ltree,S),n(g.ltree,S,I),i(g.dtree,C),n(g.dtree,C,y)}for(;;){var d=I[l(e,w)&k];w+=15&d;var o=d>>>4;if(!(o>>>8))t[f++]=o;else{if(o==256)break;var M=f+o-254;if(o>264){var j=g.ldef[o-257];M=f+(j>>>3)+x(e,w,7&j),w+=7&j}var R=y[l(e,w)&u];w+=15&R;var H=R>>>4,z=g.ddef[H],q=(z>>>4)+p(e,w,15&z);for(w+=15&z,U&&(t=a.F._check(t,f+(1<<17)));f<M;)t[f]=t[f++-q],t[f]=t[f++-q],t[f]=t[f++-q],t[f]=t[f++-q];f=M}}}else{(7&w)!=0&&(w+=8-(7&w));var D=4+(w>>>3),_=e[D-4]|e[D-3]<<8;U&&(t=a.F._check(t,f+_)),t.set(new c(e.buffer,e.byteOffset+D,_),f),w=D+_<<3,f+=_}return t.length==f?t:t.slice(0,f)},a.F._check=function(e,t){var c=e.length;if(t<=c)return e;var s=new Uint8Array(Math.max(c<<1,t));return s.set(e,0),s},a.F._decodeTiny=function(e,t,c,s,p,x){for(var r=a.F._bitsE,i=a.F._get17,n=0;n<c;){var l=e[i(s,p)&t];p+=15&l;var g=l>>>4;if(g<=15)x[n]=g,n++;else{var U=0,I=0;g==16?(I=3+r(s,p,2),p+=2,U=x[n-1]):g==17?(I=3+r(s,p,3),p+=3):g==18&&(I=11+r(s,p,7),p+=7);for(var y=n+I;n<y;)x[n]=U,n++}}return p},a.F._copyOut=function(e,t,c,s){for(var p=0,x=0,r=s.length>>>1;x<c;){var i=e[x+t];s[x<<1]=0,s[1+(x<<1)]=i,i>p&&(p=i),x++}for(;x<r;)s[x<<1]=0,s[1+(x<<1)]=0,x++;return p},a.F.makeCodes=function(e,t){for(var c,s,p,x,r=a.F.U,i=e.length,n=r.bl_count,l=0;l<=t;l++)n[l]=0;for(l=1;l<i;l+=2)n[e[l]]++;var g=r.next_code;for(c=0,n[0]=0,s=1;s<=t;s++)c=c+n[s-1]<<1,g[s]=c;for(p=0;p<i;p+=2)(x=e[p+1])!=0&&(e[p]=g[x],g[x]++)},a.F.codes2map=function(e,t,c){for(var s=e.length,p=a.F.U.rev15,x=0;x<s;x+=2)if(e[x+1]!=0)for(var r=x>>1,i=e[x+1],n=r<<4|i,l=t-i,g=e[x]<<l,U=g+(1<<l);g!=U;)c[p[g]>>>15-t]=n,g++},a.F.revCodes=function(e,t){for(var c=a.F.U.rev15,s=15-t,p=0;p<e.length;p+=2){var x=e[p]<<t-e[p+1];e[p]=c[x]>>>s}},a.F._putsE=function(e,t,c){c<<=7&t;var s=t>>>3;e[s]|=c,e[s+1]|=c>>>8},a.F._putsF=function(e,t,c){c<<=7&t;var s=t>>>3;e[s]|=c,e[s+1]|=c>>>8,e[s+2]|=c>>>16},a.F._bitsE=function(e,t,c){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<c)-1},a.F._bitsF=function(e,t,c){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<c)-1},a.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},a.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},a.F.U=(E=Uint16Array,T=Uint32Array,{next_code:new E(16),bl_count:new E(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new E(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new T(32),flmap:new E(512),fltree:[],fdmap:new E(32),fdtree:[],lmap:new E(32768),ltree:[],ttree:[],dmap:new E(32768),dtree:[],imap:new E(512),itree:[],rev15:new E(32768),lhst:new T(286),dhst:new T(30),ihst:new T(19),lits:new T(15e3),strt:new E(65536),prev:new E(32768)}),function(){for(var e=a.F.U,t=0;t<32768;t++){var c=t;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,e.rev15[t]=(c>>>16|c<<16)>>>17}function s(p,x,r){for(;x--!=0;)p.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];s(e.fltree,144,8),s(e.fltree,112,9),s(e.fltree,24,7),s(e.fltree,8,8),a.F.makeCodes(e.fltree,9),a.F.codes2map(e.fltree,9,e.flmap),a.F.revCodes(e.fltree,9),s(e.fdtree,32,5),a.F.makeCodes(e.fdtree,5),a.F.codes2map(e.fdtree,5,e.fdmap),a.F.revCodes(e.fdtree,5),s(e.itree,19,0),s(e.ltree,286,0),s(e.dtree,30,0),s(e.ttree,320,0)}()})();var ln=sn({__proto__:null,default:He},[He]);const me=function(){var m={nextZero(r,i){for(;r[i]!=0;)i++;return i},readUshort:(r,i)=>r[i]<<8|r[i+1],writeUshort(r,i,n){r[i]=n>>8&255,r[i+1]=255&n},readUint:(r,i)=>16777216*r[i]+(r[i+1]<<16|r[i+2]<<8|r[i+3]),writeUint(r,i,n){r[i]=n>>24&255,r[i+1]=n>>16&255,r[i+2]=n>>8&255,r[i+3]=255&n},readASCII(r,i,n){let l="";for(let g=0;g<n;g++)l+=String.fromCharCode(r[i+g]);return l},writeASCII(r,i,n){for(let l=0;l<n.length;l++)r[i+l]=n.charCodeAt(l)},readBytes(r,i,n){const l=[];for(let g=0;g<n;g++)l.push(r[i+g]);return l},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,i,n){let l,g="";for(let U=0;U<n;U++)g+=`%${m.pad(r[i+U].toString(16))}`;try{l=decodeURIComponent(g)}catch{return m.readASCII(r,i,n)}return l}};function E(r,i,n,l){const g=i*n,U=t(l),I=Math.ceil(i*U/8),y=new Uint8Array(4*g),L=new Uint32Array(y.buffer),{ctype:B}=l,{depth:N}=l,P=m.readUshort;if(B==6){const j=g<<2;if(N==8)for(var b=0;b<j;b+=4)y[b]=r[b],y[b+1]=r[b+1],y[b+2]=r[b+2],y[b+3]=r[b+3];if(N==16)for(b=0;b<j;b++)y[b]=r[b<<1]}else if(B==2){const j=l.tabs.tRNS;if(j==null){if(N==8)for(b=0;b<g;b++){var k=3*b;L[b]=255<<24|r[k+2]<<16|r[k+1]<<8|r[k]}if(N==16)for(b=0;b<g;b++)k=6*b,L[b]=255<<24|r[k+4]<<16|r[k+2]<<8|r[k]}else{var u=j[0];const R=j[1],H=j[2];if(N==8)for(b=0;b<g;b++){var f=b<<2;k=3*b,L[b]=255<<24|r[k+2]<<16|r[k+1]<<8|r[k],r[k]==u&&r[k+1]==R&&r[k+2]==H&&(y[f+3]=0)}if(N==16)for(b=0;b<g;b++)f=b<<2,k=6*b,L[b]=255<<24|r[k+4]<<16|r[k+2]<<8|r[k],P(r,k)==u&&P(r,k+2)==R&&P(r,k+4)==H&&(y[f+3]=0)}}else if(B==3){const j=l.tabs.PLTE,R=l.tabs.tRNS,H=R?R.length:0;if(N==1)for(var w=0;w<n;w++){var v=w*I,A=w*i;for(b=0;b<i;b++){f=A+b<<2;var F=3*(S=r[v+(b>>3)]>>7-((7&b)<<0)&1);y[f]=j[F],y[f+1]=j[F+1],y[f+2]=j[F+2],y[f+3]=S<H?R[S]:255}}if(N==2)for(w=0;w<n;w++)for(v=w*I,A=w*i,b=0;b<i;b++)f=A+b<<2,F=3*(S=r[v+(b>>2)]>>6-((3&b)<<1)&3),y[f]=j[F],y[f+1]=j[F+1],y[f+2]=j[F+2],y[f+3]=S<H?R[S]:255;if(N==4)for(w=0;w<n;w++)for(v=w*I,A=w*i,b=0;b<i;b++)f=A+b<<2,F=3*(S=r[v+(b>>1)]>>4-((1&b)<<2)&15),y[f]=j[F],y[f+1]=j[F+1],y[f+2]=j[F+2],y[f+3]=S<H?R[S]:255;if(N==8)for(b=0;b<g;b++){var S;f=b<<2,F=3*(S=r[b]),y[f]=j[F],y[f+1]=j[F+1],y[f+2]=j[F+2],y[f+3]=S<H?R[S]:255}}else if(B==4){if(N==8)for(b=0;b<g;b++){f=b<<2;var C=r[d=b<<1];y[f]=C,y[f+1]=C,y[f+2]=C,y[f+3]=r[d+1]}if(N==16)for(b=0;b<g;b++){var d;f=b<<2,C=r[d=b<<2],y[f]=C,y[f+1]=C,y[f+2]=C,y[f+3]=r[d+2]}}else if(B==0)for(u=l.tabs.tRNS?l.tabs.tRNS:-1,w=0;w<n;w++){const j=w*I,R=w*i;if(N==1)for(var o=0;o<i;o++){var M=(C=255*(r[j+(o>>>3)]>>>7-(7&o)&1))==255*u?0:255;L[R+o]=M<<24|C<<16|C<<8|C}else if(N==2)for(o=0;o<i;o++)M=(C=85*(r[j+(o>>>2)]>>>6-((3&o)<<1)&3))==85*u?0:255,L[R+o]=M<<24|C<<16|C<<8|C;else if(N==4)for(o=0;o<i;o++)M=(C=17*(r[j+(o>>>1)]>>>4-((1&o)<<2)&15))==17*u?0:255,L[R+o]=M<<24|C<<16|C<<8|C;else if(N==8)for(o=0;o<i;o++)M=(C=r[j+o])==u?0:255,L[R+o]=M<<24|C<<16|C<<8|C;else if(N==16)for(o=0;o<i;o++)C=r[j+(o<<1)],M=P(r,j+(o<<1))==u?0:255,L[R+o]=M<<24|C<<16|C<<8|C}return y}function T(r,i,n,l){const g=t(r),U=Math.ceil(n*g/8),I=new Uint8Array((U+1+r.interlace)*l);return i=r.tabs.CgBI?e(i,I):a(i,I),r.interlace==0?i=c(i,r,0,n,l):r.interlace==1&&(i=function(L,B){const N=B.width,P=B.height,b=t(B),k=b>>3,u=Math.ceil(N*b/8),f=new Uint8Array(P*u);let w=0;const v=[0,0,4,0,2,0,1],A=[0,4,0,2,0,1,0],F=[8,8,8,4,4,2,2],S=[8,8,4,4,2,2,1];let C=0;for(;C<7;){const o=F[C],M=S[C];let j=0,R=0,H=v[C];for(;H<P;)H+=o,R++;let z=A[C];for(;z<N;)z+=M,j++;const q=Math.ceil(j*b/8);c(L,B,w,j,R);let D=0,_=v[C];for(;_<P;){let W=A[C],K=w+D*q<<3;for(;W<N;){var d;if(b==1&&(d=(d=L[K>>3])>>7-(7&K)&1,f[_*u+(W>>3)]|=d<<7-((7&W)<<0)),b==2&&(d=(d=L[K>>3])>>6-(7&K)&3,f[_*u+(W>>2)]|=d<<6-((3&W)<<1)),b==4&&(d=(d=L[K>>3])>>4-(7&K)&15,f[_*u+(W>>1)]|=d<<4-((1&W)<<2)),b>=8){const $=_*u+W*k;for(let Q=0;Q<k;Q++)f[$+Q]=L[(K>>3)+Q]}K+=b,W+=M}D++,_+=o}j*R!=0&&(w+=R*(1+q)),C+=1}return f}(i,r)),i}function a(r,i){return e(new Uint8Array(r.buffer,2,r.length-6),i)}var e=function(){const r={H:{}};return r.H.N=function(i,n){const l=Uint8Array;let g,U,I=0,y=0,L=0,B=0,N=0,P=0,b=0,k=0,u=0;if(i[0]==3&&i[1]==0)return n||new l(0);const f=r.H,w=f.b,v=f.e,A=f.R,F=f.n,S=f.A,C=f.Z,d=f.m,o=n==null;for(o&&(n=new l(i.length>>>2<<5));I==0;)if(I=w(i,u,1),y=w(i,u+1,2),u+=3,y!=0){if(o&&(n=r.H.W(n,k+(1<<17))),y==1&&(g=d.J,U=d.h,P=511,b=31),y==2){L=v(i,u,5)+257,B=v(i,u+5,5)+1,N=v(i,u+10,4)+4,u+=14;let j=1;for(var M=0;M<38;M+=2)d.Q[M]=0,d.Q[M+1]=0;for(M=0;M<N;M++){const z=v(i,u+3*M,3);d.Q[1+(d.X[M]<<1)]=z,z>j&&(j=z)}u+=3*N,F(d.Q,j),S(d.Q,j,d.u),g=d.w,U=d.d,u=A(d.u,(1<<j)-1,L+B,i,u,d.v);const R=f.V(d.v,0,L,d.C);P=(1<<R)-1;const H=f.V(d.v,L,B,d.D);b=(1<<H)-1,F(d.C,R),S(d.C,R,g),F(d.D,H),S(d.D,H,U)}for(;;){const j=g[C(i,u)&P];u+=15&j;const R=j>>>4;if(!(R>>>8))n[k++]=R;else{if(R==256)break;{let H=k+R-254;if(R>264){const W=d.q[R-257];H=k+(W>>>3)+v(i,u,7&W),u+=7&W}const z=U[C(i,u)&b];u+=15&z;const q=z>>>4,D=d.c[q],_=(D>>>4)+w(i,u,15&D);for(u+=15&D;k<H;)n[k]=n[k++-_],n[k]=n[k++-_],n[k]=n[k++-_],n[k]=n[k++-_];k=H}}}}else{(7&u)!=0&&(u+=8-(7&u));const j=4+(u>>>3),R=i[j-4]|i[j-3]<<8;o&&(n=r.H.W(n,k+R)),n.set(new l(i.buffer,i.byteOffset+j,R),k),u=j+R<<3,k+=R}return n.length==k?n:n.slice(0,k)},r.H.W=function(i,n){const l=i.length;if(n<=l)return i;const g=new Uint8Array(l<<1);return g.set(i,0),g},r.H.R=function(i,n,l,g,U,I){const y=r.H.e,L=r.H.Z;let B=0;for(;B<l;){const N=i[L(g,U)&n];U+=15&N;const P=N>>>4;if(P<=15)I[B]=P,B++;else{let b=0,k=0;P==16?(k=3+y(g,U,2),U+=2,b=I[B-1]):P==17?(k=3+y(g,U,3),U+=3):P==18&&(k=11+y(g,U,7),U+=7);const u=B+k;for(;B<u;)I[B]=b,B++}}return U},r.H.V=function(i,n,l,g){let U=0,I=0;const y=g.length>>>1;for(;I<l;){const L=i[I+n];g[I<<1]=0,g[1+(I<<1)]=L,L>U&&(U=L),I++}for(;I<y;)g[I<<1]=0,g[1+(I<<1)]=0,I++;return U},r.H.n=function(i,n){const l=r.H.m,g=i.length;let U,I,y,L;const B=l.j;for(var N=0;N<=n;N++)B[N]=0;for(N=1;N<g;N+=2)B[i[N]]++;const P=l.K;for(U=0,B[0]=0,I=1;I<=n;I++)U=U+B[I-1]<<1,P[I]=U;for(y=0;y<g;y+=2)L=i[y+1],L!=0&&(i[y]=P[L],P[L]++)},r.H.A=function(i,n,l){const g=i.length,U=r.H.m.r;for(let I=0;I<g;I+=2)if(i[I+1]!=0){const y=I>>1,L=i[I+1],B=y<<4|L,N=n-L;let P=i[I]<<N;const b=P+(1<<N);for(;P!=b;)l[U[P]>>>15-n]=B,P++}},r.H.l=function(i,n){const l=r.H.m.r,g=15-n;for(let U=0;U<i.length;U+=2){const I=i[U]<<n-i[U+1];i[U]=l[I]>>>g}},r.H.M=function(i,n,l){l<<=7&n;const g=n>>>3;i[g]|=l,i[g+1]|=l>>>8},r.H.I=function(i,n,l){l<<=7&n;const g=n>>>3;i[g]|=l,i[g+1]|=l>>>8,i[g+2]|=l>>>16},r.H.e=function(i,n,l){return(i[n>>>3]|i[1+(n>>>3)]<<8)>>>(7&n)&(1<<l)-1},r.H.b=function(i,n,l){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16)>>>(7&n)&(1<<l)-1},r.H.Z=function(i,n){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(i,n){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16|i[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const i=Uint16Array,n=Uint32Array;return{K:new i(16),j:new i(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new i(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new i(512),_:[],h:new i(32),$:[],w:new i(32768),C:[],v:[],d:new i(32768),D:[],u:new i(512),Q:[],r:new i(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new i(65536),g:new i(32768)}}(),function(){const i=r.H.m;for(var n=0;n<32768;n++){let g=n;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,i.r[n]=(g>>>16|g<<16)>>>17}function l(g,U,I){for(;U--!=0;)g.push(0,I)}for(n=0;n<32;n++)i.q[n]=i.S[n]<<3|i.T[n],i.c[n]=i.p[n]<<4|i.z[n];l(i._,144,8),l(i._,112,9),l(i._,24,7),l(i._,8,8),r.H.n(i._,9),r.H.A(i._,9,i.J),r.H.l(i._,9),l(i.$,32,5),r.H.n(i.$,5),r.H.A(i.$,5,i.h),r.H.l(i.$,5),l(i.Q,19,0),l(i.C,286,0),l(i.D,30,0),l(i.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function c(r,i,n,l,g){let U=t(i);const I=Math.ceil(l*U/8);let y,L;U=Math.ceil(U/8);let B=r[n],N=0;if(B>1&&(r[n]=[0,0,1][B-2]),B==3)for(N=U;N<I;N++)r[N+1]=r[N+1]+(r[N+1-U]>>>1)&255;for(let P=0;P<g;P++)if(y=n+P*I,L=y+P+1,B=r[L-1],N=0,B==0)for(;N<I;N++)r[y+N]=r[L+N];else if(B==1){for(;N<U;N++)r[y+N]=r[L+N];for(;N<I;N++)r[y+N]=r[L+N]+r[y+N-U]}else if(B==2)for(;N<I;N++)r[y+N]=r[L+N]+r[y+N-I];else if(B==3){for(;N<U;N++)r[y+N]=r[L+N]+(r[y+N-I]>>>1);for(;N<I;N++)r[y+N]=r[L+N]+(r[y+N-I]+r[y+N-U]>>>1)}else{for(;N<U;N++)r[y+N]=r[L+N]+s(0,r[y+N-I],0);for(;N<I;N++)r[y+N]=r[L+N]+s(r[y+N-U],r[y+N-I],r[y+N-U-I])}return r}function s(r,i,n){const l=r+i-n,g=l-r,U=l-i,I=l-n;return g*g<=U*U&&g*g<=I*I?r:U*U<=I*I?i:n}function p(r,i,n){n.width=m.readUint(r,i),i+=4,n.height=m.readUint(r,i),i+=4,n.depth=r[i],i++,n.ctype=r[i],i++,n.compress=r[i],i++,n.filter=r[i],i++,n.interlace=r[i],i++}function x(r,i,n,l,g,U,I,y,L){const B=Math.min(i,g),N=Math.min(n,U);let P=0,b=0;for(let C=0;C<N;C++)for(let d=0;d<B;d++)if(I>=0&&y>=0?(P=C*i+d<<2,b=(y+C)*g+I+d<<2):(P=(-y+C)*i-I+d<<2,b=C*g+d<<2),L==0)l[b]=r[P],l[b+1]=r[P+1],l[b+2]=r[P+2],l[b+3]=r[P+3];else if(L==1){var k=r[P+3]*.00392156862745098,u=r[P]*k,f=r[P+1]*k,w=r[P+2]*k,v=l[b+3]*(1/255),A=l[b]*v,F=l[b+1]*v,S=l[b+2]*v;const o=1-k,M=k+v*o,j=M==0?0:1/M;l[b+3]=255*M,l[b+0]=(u+A*o)*j,l[b+1]=(f+F*o)*j,l[b+2]=(w+S*o)*j}else if(L==2)k=r[P+3],u=r[P],f=r[P+1],w=r[P+2],v=l[b+3],A=l[b],F=l[b+1],S=l[b+2],k==v&&u==A&&f==F&&w==S?(l[b]=0,l[b+1]=0,l[b+2]=0,l[b+3]=0):(l[b]=u,l[b+1]=f,l[b+2]=w,l[b+3]=k);else if(L==3){if(k=r[P+3],u=r[P],f=r[P+1],w=r[P+2],v=l[b+3],A=l[b],F=l[b+1],S=l[b+2],k==v&&u==A&&f==F&&w==S)continue;if(k<220&&v>20)return!1}return!0}return{decode:function(i){const n=new Uint8Array(i);let l=8;const g=m,U=g.readUshort,I=g.readUint,y={tabs:{},frames:[]},L=new Uint8Array(n.length);let B,N=0,P=0;const b=[137,80,78,71,13,10,26,10];for(var k=0;k<8;k++)if(n[k]!=b[k])throw"The input is not a PNG file!";for(;l<n.length;){const C=g.readUint(n,l);l+=4;const d=g.readASCII(n,l,4);if(l+=4,d=="IHDR")p(n,l,y);else if(d=="iCCP"){for(var u=l;n[u]!=0;)u++;g.readASCII(n,l,u-l),n[u+1];const o=n.slice(u+2,l+C);let M=null;try{M=a(o)}catch{M=e(o)}y.tabs[d]=M}else if(d=="CgBI")y.tabs[d]=n.slice(l,l+4);else if(d=="IDAT"){for(k=0;k<C;k++)L[N+k]=n[l+k];N+=C}else if(d=="acTL")y.tabs[d]={num_frames:I(n,l),num_plays:I(n,l+4)},B=new Uint8Array(n.length);else if(d=="fcTL"){P!=0&&((S=y.frames[y.frames.length-1]).data=T(y,B.slice(0,P),S.rect.width,S.rect.height),P=0);const o={x:I(n,l+12),y:I(n,l+16),width:I(n,l+4),height:I(n,l+8)};let M=U(n,l+22);M=U(n,l+20)/(M==0?100:M);const j={rect:o,delay:Math.round(1e3*M),dispose:n[l+24],blend:n[l+25]};y.frames.push(j)}else if(d=="fdAT"){for(k=0;k<C-4;k++)B[P+k]=n[l+k+4];P+=C-4}else if(d=="pHYs")y.tabs[d]=[g.readUint(n,l),g.readUint(n,l+4),n[l+8]];else if(d=="cHRM")for(y.tabs[d]=[],k=0;k<8;k++)y.tabs[d].push(g.readUint(n,l+4*k));else if(d=="tEXt"||d=="zTXt"){y.tabs[d]==null&&(y.tabs[d]={});var f=g.nextZero(n,l),w=g.readASCII(n,l,f-l),v=l+C-f-1;if(d=="tEXt")F=g.readASCII(n,f+1,v);else{var A=a(n.slice(f+2,f+2+v));F=g.readUTF8(A,0,A.length)}y.tabs[d][w]=F}else if(d=="iTXt"){y.tabs[d]==null&&(y.tabs[d]={}),f=0,u=l,f=g.nextZero(n,u),w=g.readASCII(n,u,f-u);const o=n[u=f+1];var F;n[u+1],u+=2,f=g.nextZero(n,u),g.readASCII(n,u,f-u),u=f+1,f=g.nextZero(n,u),g.readUTF8(n,u,f-u),v=C-((u=f+1)-l),o==0?F=g.readUTF8(n,u,v):(A=a(n.slice(u,u+v)),F=g.readUTF8(A,0,A.length)),y.tabs[d][w]=F}else if(d=="PLTE")y.tabs[d]=g.readBytes(n,l,C);else if(d=="hIST"){const o=y.tabs.PLTE.length/3;for(y.tabs[d]=[],k=0;k<o;k++)y.tabs[d].push(U(n,l+2*k))}else if(d=="tRNS")y.ctype==3?y.tabs[d]=g.readBytes(n,l,C):y.ctype==0?y.tabs[d]=U(n,l):y.ctype==2&&(y.tabs[d]=[U(n,l),U(n,l+2),U(n,l+4)]);else if(d=="gAMA")y.tabs[d]=g.readUint(n,l)/1e5;else if(d=="sRGB")y.tabs[d]=n[l];else if(d=="bKGD")y.ctype==0||y.ctype==4?y.tabs[d]=[U(n,l)]:y.ctype==2||y.ctype==6?y.tabs[d]=[U(n,l),U(n,l+2),U(n,l+4)]:y.ctype==3&&(y.tabs[d]=n[l]);else if(d=="IEND")break;l+=C,g.readUint(n,l),l+=4}var S;return P!=0&&((S=y.frames[y.frames.length-1]).data=T(y,B.slice(0,P),S.rect.width,S.rect.height)),y.data=T(y,L,y.width,y.height),delete y.compress,delete y.interlace,delete y.filter,y},toRGBA8:function(i){const n=i.width,l=i.height;if(i.tabs.acTL==null)return[E(i.data,n,l,i).buffer];const g=[];i.frames[0].data==null&&(i.frames[0].data=i.data);const U=n*l*4,I=new Uint8Array(U),y=new Uint8Array(U),L=new Uint8Array(U);for(let N=0;N<i.frames.length;N++){const P=i.frames[N],b=P.rect.x,k=P.rect.y,u=P.rect.width,f=P.rect.height,w=E(P.data,u,f,i);if(N!=0)for(var B=0;B<U;B++)L[B]=I[B];if(P.blend==0?x(w,u,f,I,n,l,b,k,0):P.blend==1&&x(w,u,f,I,n,l,b,k,1),g.push(I.buffer.slice(0)),P.dispose!=0){if(P.dispose==1)x(y,u,f,I,n,l,b,k,0);else if(P.dispose==2)for(B=0;B<U;B++)I[B]=L[B]}}return g},_paeth:s,_copyTile:x,_bin:m}}();(function(){const{_copyTile:m}=me,{_bin:E}=me,T=me._paeth;var a={table:function(){const u=new Uint32Array(256);for(let f=0;f<256;f++){let w=f;for(let v=0;v<8;v++)1&w?w=3988292384^w>>>1:w>>>=1;u[f]=w}return u}(),update(u,f,w,v){for(let A=0;A<v;A++)u=a.table[255&(u^f[w+A])]^u>>>8;return u},crc:(u,f,w)=>4294967295^a.update(4294967295,u,f,w)};function e(u,f,w,v){f[w]+=u[0]*v>>4,f[w+1]+=u[1]*v>>4,f[w+2]+=u[2]*v>>4,f[w+3]+=u[3]*v>>4}function t(u){return Math.max(0,Math.min(255,u))}function c(u,f){const w=u[0]-f[0],v=u[1]-f[1],A=u[2]-f[2],F=u[3]-f[3];return w*w+v*v+A*A+F*F}function s(u,f,w,v,A,F,S){S==null&&(S=1);const C=v.length,d=[];for(var o=0;o<C;o++){const _=v[o];d.push([_>>>0&255,_>>>8&255,_>>>16&255,_>>>24&255])}for(o=0;o<C;o++){let _=4294967295;for(var M=0,j=0;j<C;j++){var R=c(d[o],d[j]);j!=o&&R<_&&(_=R,M=j)}}const H=new Uint32Array(A.buffer),z=new Int16Array(f*w*4),q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(o=0;o<q.length;o++)q[o]=255*((q[o]+.5)/16-.5);for(let _=0;_<w;_++)for(let W=0;W<f;W++){var D;o=4*(_*f+W),S!=2?D=[t(u[o]+z[o]),t(u[o+1]+z[o+1]),t(u[o+2]+z[o+2]),t(u[o+3]+z[o+3])]:(R=q[4*(3&_)+(3&W)],D=[t(u[o]+R),t(u[o+1]+R),t(u[o+2]+R),t(u[o+3]+R)]),M=0;let K=16777215;for(j=0;j<C;j++){const V=c(D,d[j]);V<K&&(K=V,M=j)}const $=d[M],Q=[D[0]-$[0],D[1]-$[1],D[2]-$[2],D[3]-$[3]];S==1&&(W!=f-1&&e(Q,z,o+4,7),_!=w-1&&(W!=0&&e(Q,z,o+4*f-4,3),e(Q,z,o+4*f,5),W!=f-1&&e(Q,z,o+4*f+4,1))),F[o>>2]=M,H[o>>2]=v[M]}}function p(u,f,w,v,A){A==null&&(A={});const{crc:F}=a,S=E.writeUint,C=E.writeUshort,d=E.writeASCII;let o=8;const M=u.frames.length>1;let j,R=!1,H=33+(M?20:0);if(A.sRGB!=null&&(H+=13),A.pHYs!=null&&(H+=21),A.iCCP!=null&&(j=pako.deflate(A.iCCP),H+=21+j.length+4),u.ctype==3){for(var z=u.plte.length,q=0;q<z;q++)u.plte[q]>>>24!=255&&(R=!0);H+=8+3*z+4+(R?8+1*z+4:0)}for(var D=0;D<u.frames.length;D++)M&&(H+=38),H+=($=u.frames[D]).cimg.length+12,D!=0&&(H+=4);H+=12;const _=new Uint8Array(H),W=[137,80,78,71,13,10,26,10];for(q=0;q<8;q++)_[q]=W[q];if(S(_,o,13),o+=4,d(_,o,"IHDR"),o+=4,S(_,o,f),o+=4,S(_,o,w),o+=4,_[o]=u.depth,o++,_[o]=u.ctype,o++,_[o]=0,o++,_[o]=0,o++,_[o]=0,o++,S(_,o,F(_,o-17,17)),o+=4,A.sRGB!=null&&(S(_,o,1),o+=4,d(_,o,"sRGB"),o+=4,_[o]=A.sRGB,o++,S(_,o,F(_,o-5,5)),o+=4),A.iCCP!=null){const Q=13+j.length;S(_,o,Q),o+=4,d(_,o,"iCCP"),o+=4,d(_,o,"ICC profile"),o+=11,o+=2,_.set(j,o),o+=j.length,S(_,o,F(_,o-(Q+4),Q+4)),o+=4}if(A.pHYs!=null&&(S(_,o,9),o+=4,d(_,o,"pHYs"),o+=4,S(_,o,A.pHYs[0]),o+=4,S(_,o,A.pHYs[1]),o+=4,_[o]=A.pHYs[2],o++,S(_,o,F(_,o-13,13)),o+=4),M&&(S(_,o,8),o+=4,d(_,o,"acTL"),o+=4,S(_,o,u.frames.length),o+=4,S(_,o,A.loop!=null?A.loop:0),o+=4,S(_,o,F(_,o-12,12)),o+=4),u.ctype==3){for(S(_,o,3*(z=u.plte.length)),o+=4,d(_,o,"PLTE"),o+=4,q=0;q<z;q++){const Q=3*q,V=u.plte[q],te=255&V,ie=V>>>8&255,Te=V>>>16&255;_[o+Q+0]=te,_[o+Q+1]=ie,_[o+Q+2]=Te}if(o+=3*z,S(_,o,F(_,o-3*z-4,3*z+4)),o+=4,R){for(S(_,o,z),o+=4,d(_,o,"tRNS"),o+=4,q=0;q<z;q++)_[o+q]=u.plte[q]>>>24&255;o+=z,S(_,o,F(_,o-z-4,z+4)),o+=4}}let K=0;for(D=0;D<u.frames.length;D++){var $=u.frames[D];M&&(S(_,o,26),o+=4,d(_,o,"fcTL"),o+=4,S(_,o,K++),o+=4,S(_,o,$.rect.width),o+=4,S(_,o,$.rect.height),o+=4,S(_,o,$.rect.x),o+=4,S(_,o,$.rect.y),o+=4,C(_,o,v[D]),o+=2,C(_,o,1e3),o+=2,_[o]=$.dispose,o++,_[o]=$.blend,o++,S(_,o,F(_,o-30,30)),o+=4);const Q=$.cimg;S(_,o,(z=Q.length)+(D==0?0:4)),o+=4;const V=o;d(_,o,D==0?"IDAT":"fdAT"),o+=4,D!=0&&(S(_,o,K++),o+=4),_.set(Q,o),o+=z,S(_,o,F(_,V,o-V)),o+=4}return S(_,o,0),o+=4,d(_,o,"IEND"),o+=4,S(_,o,F(_,o-4,4)),o+=4,_.buffer}function x(u,f,w){for(let v=0;v<u.frames.length;v++){const A=u.frames[v];A.rect.width;const F=A.rect.height,S=new Uint8Array(F*A.bpl+F);A.cimg=l(A.img,F,A.bpp,A.bpl,S,f,w)}}function r(u,f,w,v,A){const F=A[0],S=A[1],C=A[2],d=A[3],o=A[4],M=A[5];let j=6,R=8,H=255;for(var z=0;z<u.length;z++){const ae=new Uint8Array(u[z]);for(var q=ae.length,D=0;D<q;D+=4)H&=ae[D+3]}const _=H!=255,W=function(J,Y,se,ce,ne,de){const re=[];for(var X=0;X<J.length;X++){const fe=new Uint8Array(J[X]),ge=new Uint32Array(fe.buffer);var he;let pe=0,ye=0,ve=Y,Ue=se,Ke=ce?1:0;if(X!=0){const zt=de||ce||X==1||re[X-2].dispose!=0?1:2;let $e=0,it=1e9;for(let Be=0;Be<zt;Be++){var Se=new Uint8Array(J[X-1-Be]);const Ht=new Uint32Array(J[X-1-Be]);let Ae=Y,Ee=se,ke=-1,Me=-1;for(let Ie=0;Ie<se;Ie++)for(let Ce=0;Ce<Y;Ce++)ge[oe=Ie*Y+Ce]!=Ht[oe]&&(Ce<Ae&&(Ae=Ce),Ce>ke&&(ke=Ce),Ie<Ee&&(Ee=Ie),Ie>Me&&(Me=Ie));ke==-1&&(Ae=Ee=ke=Me=0),ne&&((1&Ae)==1&&Ae--,(1&Ee)==1&&Ee--);const st=(ke-Ae+1)*(Me-Ee+1);st<it&&(it=st,$e=Be,pe=Ae,ye=Ee,ve=ke-Ae+1,Ue=Me-Ee+1)}Se=new Uint8Array(J[X-1-$e]),$e==1&&(re[X-1].dispose=2),he=new Uint8Array(ve*Ue*4),m(Se,Y,se,he,ve,Ue,-pe,-ye,0),Ke=m(fe,Y,se,he,ve,Ue,-pe,-ye,3)?1:0,Ke==1?n(fe,Y,se,he,{x:pe,y:ye,width:ve,height:Ue}):m(fe,Y,se,he,ve,Ue,-pe,-ye,0)}else he=fe.slice(0);re.push({rect:{x:pe,y:ye,width:ve,height:Ue},img:he,blend:Ke,dispose:0})}if(ce)for(X=0;X<re.length;X++){if((Fe=re[X]).blend==1)continue;const fe=Fe.rect,ge=re[X-1].rect,pe=Math.min(fe.x,ge.x),ye=Math.min(fe.y,ge.y),ve={x:pe,y:ye,width:Math.max(fe.x+fe.width,ge.x+ge.width)-pe,height:Math.max(fe.y+fe.height,ge.y+ge.height)-ye};re[X-1].dispose=1,X-1!=0&&i(J,Y,se,re,X-1,ve,ne),i(J,Y,se,re,X,ve,ne)}let De=0;if(J.length!=1)for(var oe=0;oe<re.length;oe++){var Fe;De+=(Fe=re[oe]).rect.width*Fe.rect.height}return re}(u,f,w,F,S,C),K={},$=[],Q=[];if(v!=0){const ae=[];for(D=0;D<W.length;D++)ae.push(W[D].img.buffer);const J=function(ne){let de=0;for(var re=0;re<ne.length;re++)de+=ne[re].byteLength;const X=new Uint8Array(de);let he=0;for(re=0;re<ne.length;re++){const Se=new Uint8Array(ne[re]),De=Se.length;for(let oe=0;oe<De;oe+=4){let Fe=Se[oe],fe=Se[oe+1],ge=Se[oe+2];const pe=Se[oe+3];pe==0&&(Fe=fe=ge=0),X[he+oe]=Fe,X[he+oe+1]=fe,X[he+oe+2]=ge,X[he+oe+3]=pe}he+=De}return X.buffer}(ae),Y=U(J,v);for(D=0;D<Y.plte.length;D++)$.push(Y.plte[D].est.rgba);let se=0;for(D=0;D<W.length;D++){const ce=(te=W[D]).img.length;var V=new Uint8Array(Y.inds.buffer,se>>2,ce>>2);Q.push(V);const ne=new Uint8Array(Y.abuf,se,ce);M&&s(te.img,te.rect.width,te.rect.height,$,ne,V),te.img.set(ne),se+=ce}}else for(z=0;z<W.length;z++){var te=W[z];const ae=new Uint32Array(te.img.buffer);var ie=te.rect.width;for(q=ae.length,V=new Uint8Array(q),Q.push(V),D=0;D<q;D++){const J=ae[D];if(D!=0&&J==ae[D-1])V[D]=V[D-1];else if(D>ie&&J==ae[D-ie])V[D]=V[D-ie];else{let Y=K[J];if(Y==null&&(K[J]=Y=$.length,$.push(J),$.length>=300))break;V[D]=Y}}}const Te=$.length;for(Te<=256&&o==0&&(R=Te<=2?1:Te<=4?2:Te<=16?4:8,R=Math.max(R,d)),z=0;z<W.length;z++){(te=W[z]).rect.x,te.rect.y,ie=te.rect.width;const ae=te.rect.height;let J=te.img;new Uint32Array(J.buffer);let Y=4*ie,se=4;if(Te<=256&&o==0){Y=Math.ceil(R*ie/8);var be=new Uint8Array(Y*ae);const ce=Q[z];for(let ne=0;ne<ae;ne++){D=ne*Y;const de=ne*ie;if(R==8)for(var ee=0;ee<ie;ee++)be[D+ee]=ce[de+ee];else if(R==4)for(ee=0;ee<ie;ee++)be[D+(ee>>1)]|=ce[de+ee]<<4-4*(1&ee);else if(R==2)for(ee=0;ee<ie;ee++)be[D+(ee>>2)]|=ce[de+ee]<<6-2*(3&ee);else if(R==1)for(ee=0;ee<ie;ee++)be[D+(ee>>3)]|=ce[de+ee]<<7-1*(7&ee)}J=be,j=3,se=1}else if(_==0&&W.length==1){be=new Uint8Array(ie*ae*3);const ce=ie*ae;for(D=0;D<ce;D++){const ne=3*D,de=4*D;be[ne]=J[de],be[ne+1]=J[de+1],be[ne+2]=J[de+2]}J=be,j=2,se=3,Y=3*ie}te.img=J,te.bpl=Y,te.bpp=se}return{ctype:j,depth:R,plte:$,frames:W}}function i(u,f,w,v,A,F,S){const C=Uint8Array,d=Uint32Array,o=new C(u[A-1]),M=new d(u[A-1]),j=A+1<u.length?new C(u[A+1]):null,R=new C(u[A]),H=new d(R.buffer);let z=f,q=w,D=-1,_=-1;for(let K=0;K<F.height;K++)for(let $=0;$<F.width;$++){const Q=F.x+$,V=F.y+K,te=V*f+Q,ie=H[te];ie==0||v[A-1].dispose==0&&M[te]==ie&&(j==null||j[4*te+3]!=0)||(Q<z&&(z=Q),Q>D&&(D=Q),V<q&&(q=V),V>_&&(_=V))}D==-1&&(z=q=D=_=0),S&&((1&z)==1&&z--,(1&q)==1&&q--),F={x:z,y:q,width:D-z+1,height:_-q+1};const W=v[A];W.rect=F,W.blend=1,W.img=new Uint8Array(F.width*F.height*4),v[A-1].dispose==0?(m(o,f,w,W.img,F.width,F.height,-F.x,-F.y,0),n(R,f,w,W.img,F)):m(R,f,w,W.img,F.width,F.height,-F.x,-F.y,0)}function n(u,f,w,v,A){m(u,f,w,v,A.width,A.height,-A.x,-A.y,2)}function l(u,f,w,v,A,F,S){const C=[];let d,o=[0,1,2,3,4];F!=-1?o=[F]:(f*v>5e5||w==1)&&(o=[0]),S&&(d={level:0});const M=ln;for(var j=0;j<o.length;j++){for(let z=0;z<f;z++)g(A,u,z,v,w,o[j]);C.push(M.deflate(A,d))}let R,H=1e9;for(j=0;j<C.length;j++)C[j].length<H&&(R=j,H=C[j].length);return C[R]}function g(u,f,w,v,A,F){const S=w*v;let C=S+w;if(u[C]=F,C++,F==0)if(v<500)for(var d=0;d<v;d++)u[C+d]=f[S+d];else u.set(new Uint8Array(f.buffer,S,v),C);else if(F==1){for(d=0;d<A;d++)u[C+d]=f[S+d];for(d=A;d<v;d++)u[C+d]=f[S+d]-f[S+d-A]+256&255}else if(w==0){for(d=0;d<A;d++)u[C+d]=f[S+d];if(F==2)for(d=A;d<v;d++)u[C+d]=f[S+d];if(F==3)for(d=A;d<v;d++)u[C+d]=f[S+d]-(f[S+d-A]>>1)+256&255;if(F==4)for(d=A;d<v;d++)u[C+d]=f[S+d]-T(f[S+d-A],0,0)+256&255}else{if(F==2)for(d=0;d<v;d++)u[C+d]=f[S+d]+256-f[S+d-v]&255;if(F==3){for(d=0;d<A;d++)u[C+d]=f[S+d]+256-(f[S+d-v]>>1)&255;for(d=A;d<v;d++)u[C+d]=f[S+d]+256-(f[S+d-v]+f[S+d-A]>>1)&255}if(F==4){for(d=0;d<A;d++)u[C+d]=f[S+d]+256-T(0,f[S+d-v],0)&255;for(d=A;d<v;d++)u[C+d]=f[S+d]+256-T(f[S+d-A],f[S+d-v],f[S+d-A-v])&255}}}function U(u,f){const w=new Uint8Array(u),v=w.slice(0),A=new Uint32Array(v.buffer),F=I(v,f),S=F[0],C=F[1],d=w.length,o=new Uint8Array(d>>2);let M;if(w.length<2e7)for(var j=0;j<d;j+=4)M=y(S,R=w[j]*(1/255),H=w[j+1]*(1/255),z=w[j+2]*(1/255),q=w[j+3]*(1/255)),o[j>>2]=M.ind,A[j>>2]=M.est.rgba;else for(j=0;j<d;j+=4){var R=w[j]*.00392156862745098,H=w[j+1]*(1/255),z=w[j+2]*(1/255),q=w[j+3]*(1/255);for(M=S;M.left;)M=L(M.est,R,H,z,q)<=0?M.left:M.right;o[j>>2]=M.ind,A[j>>2]=M.est.rgba}return{abuf:v.buffer,inds:o,plte:C}}function I(u,f,w){w==null&&(w=1e-4);const v=new Uint32Array(u.buffer),A={i0:0,i1:u.length,bst:null,est:null,tdst:0,left:null,right:null};A.bst=P(u,A.i0,A.i1),A.est=b(A.bst);const F=[A];for(;F.length<f;){let C=0,d=0;for(var S=0;S<F.length;S++)F[S].est.L>C&&(C=F[S].est.L,d=S);if(C<w)break;const o=F[d],M=B(u,v,o.i0,o.i1,o.est.e,o.est.eMq255);if(o.i0>=M||o.i1<=M){o.est.L=0;continue}const j={i0:o.i0,i1:M,bst:null,est:null,tdst:0,left:null,right:null};j.bst=P(u,j.i0,j.i1),j.est=b(j.bst);const R={i0:M,i1:o.i1,bst:null,est:null,tdst:0,left:null,right:null};for(R.bst={R:[],m:[],N:o.bst.N-j.bst.N},S=0;S<16;S++)R.bst.R[S]=o.bst.R[S]-j.bst.R[S];for(S=0;S<4;S++)R.bst.m[S]=o.bst.m[S]-j.bst.m[S];R.est=b(R.bst),o.left=j,o.right=R,F[d]=j,F.push(R)}for(F.sort((C,d)=>d.bst.N-C.bst.N),S=0;S<F.length;S++)F[S].ind=S;return[A,F]}function y(u,f,w,v,A){if(u.left==null)return u.tdst=function(j,R,H,z,q){const D=R-j[0],_=H-j[1],W=z-j[2],K=q-j[3];return D*D+_*_+W*W+K*K}(u.est.q,f,w,v,A),u;const F=L(u.est,f,w,v,A);let S=u.left,C=u.right;F>0&&(S=u.right,C=u.left);const d=y(S,f,w,v,A);if(d.tdst<=F*F)return d;const o=y(C,f,w,v,A);return o.tdst<d.tdst?o:d}function L(u,f,w,v,A){const{e:F}=u;return F[0]*f+F[1]*w+F[2]*v+F[3]*A-u.eMq}function B(u,f,w,v,A,F){for(v-=4;w<v;){for(;N(u,w,A)<=F;)w+=4;for(;N(u,v,A)>F;)v-=4;if(w>=v)break;const S=f[w>>2];f[w>>2]=f[v>>2],f[v>>2]=S,w+=4,v-=4}for(;N(u,w,A)>F;)w-=4;return w+4}function N(u,f,w){return u[f]*w[0]+u[f+1]*w[1]+u[f+2]*w[2]+u[f+3]*w[3]}function P(u,f,w){const v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=[0,0,0,0],F=w-f>>2;for(let S=f;S<w;S+=4){const C=u[S]*.00392156862745098,d=u[S+1]*(1/255),o=u[S+2]*(1/255),M=u[S+3]*(1/255);A[0]+=C,A[1]+=d,A[2]+=o,A[3]+=M,v[0]+=C*C,v[1]+=C*d,v[2]+=C*o,v[3]+=C*M,v[5]+=d*d,v[6]+=d*o,v[7]+=d*M,v[10]+=o*o,v[11]+=o*M,v[15]+=M*M}return v[4]=v[1],v[8]=v[2],v[9]=v[6],v[12]=v[3],v[13]=v[7],v[14]=v[11],{R:v,m:A,N:F}}function b(u){const{R:f}=u,{m:w}=u,{N:v}=u,A=w[0],F=w[1],S=w[2],C=w[3],d=v==0?0:1/v,o=[f[0]-A*A*d,f[1]-A*F*d,f[2]-A*S*d,f[3]-A*C*d,f[4]-F*A*d,f[5]-F*F*d,f[6]-F*S*d,f[7]-F*C*d,f[8]-S*A*d,f[9]-S*F*d,f[10]-S*S*d,f[11]-S*C*d,f[12]-C*A*d,f[13]-C*F*d,f[14]-C*S*d,f[15]-C*C*d],M=o,j=k;let R=[Math.random(),Math.random(),Math.random(),Math.random()],H=0,z=0;if(v!=0)for(let D=0;D<16&&(R=j.multVec(M,R),z=Math.sqrt(j.dot(R,R)),R=j.sml(1/z,R),!(D!=0&&Math.abs(z-H)<1e-9));D++)H=z;const q=[A*d,F*d,S*d,C*d];return{Cov:o,q,e:R,L:H,eMq255:j.dot(j.sml(255,q),R),eMq:j.dot(R,q),rgba:(Math.round(255*q[3])<<24|Math.round(255*q[2])<<16|Math.round(255*q[1])<<8|Math.round(255*q[0])<<0)>>>0}}var k={multVec:(u,f)=>[u[0]*f[0]+u[1]*f[1]+u[2]*f[2]+u[3]*f[3],u[4]*f[0]+u[5]*f[1]+u[6]*f[2]+u[7]*f[3],u[8]*f[0]+u[9]*f[1]+u[10]*f[2]+u[11]*f[3],u[12]*f[0]+u[13]*f[1]+u[14]*f[2]+u[15]*f[3]],dot:(u,f)=>u[0]*f[0]+u[1]*f[1]+u[2]*f[2]+u[3]*f[3],sml:(u,f)=>[u*f[0],u*f[1],u*f[2],u*f[3]]};me.encode=function(f,w,v,A,F,S,C){A==null&&(A=0),C==null&&(C=!1);const d=r(f,w,v,A,[!1,!1,!1,0,C,!1]);return x(d,-1),p(d,w,v,F,S)},me.encodeLL=function(f,w,v,A,F,S,C,d){const o={ctype:0+(A==1?0:2)+(F==0?0:4),depth:S,frames:[]},M=(A+F)*S,j=M*w;for(let R=0;R<f.length;R++)o.frames.push({rect:{x:0,y:0,width:w,height:v},img:new Uint8Array(f[R]),blend:0,dispose:1,bpp:Math.ceil(M/8),bpl:Math.ceil(j/8)});return x(o,0,!0),p(o,w,v,C,d)},me.encode.compress=r,me.encode.dither=s,me.quantize=U,me.quantize.getKDtree=I,me.quantize.getNearest=y})();const It={toArrayBuffer(m,E){const T=m.width,a=m.height,e=T<<2,t=m.getContext("2d").getImageData(0,0,T,a),c=new Uint32Array(t.data.buffer),s=(32*T+31)/32<<2,p=s*a,x=122+p,r=new ArrayBuffer(x),i=new DataView(r),n=1<<20;let l,g,U,I,y=n,L=0,B=0,N=0;function P(u){i.setUint16(B,u,!0),B+=2}function b(u){i.setUint32(B,u,!0),B+=4}function k(u){B+=u}P(19778),b(x),k(4),b(122),b(108),b(T),b(-a>>>0),P(1),P(32),b(3),b(p),b(2835),b(2835),k(8),b(16711680),b(65280),b(255),b(4278190080),b(1466527264),function u(){for(;L<a&&y>0;){for(I=122+L*s,l=0;l<e;)y--,g=c[N++],U=g>>>24,i.setUint32(I+l,g<<8|U),l+=4;L++}N<c.length?(y=n,setTimeout(u,It._dly)):E(r)}()},toBlob(m,E){this.toArrayBuffer(m,T=>{E(new Blob([T],{type:"image/bmp"}))})},_dly:9};var ue={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},cn={[ue.CHROME]:16384,[ue.FIREFOX]:11180,[ue.DESKTOP_SAFARI]:16384,[ue.IE]:8192,[ue.IOS]:4096,[ue.ETC]:8192};const nt=typeof window<"u",Ct=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,We=nt&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),fn=(nt||Ct)&&(We&&We.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Rt=(nt||Ct)&&(We&&We.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function rt(m,E,T=Date.now()){return new Promise(a=>{const e=m.split(","),t=e[0].match(/:(.*?);/)[1],c=globalThis.atob(e[1]);let s=c.length;const p=new Uint8Array(s);for(;s--;)p[s]=c.charCodeAt(s);const x=new Blob([p],{type:t});x.name=E,x.lastModified=T,a(x)})}function Nt(m){return new Promise((E,T)=>{const a=new Rt;a.onload=()=>E(a.result),a.onerror=e=>T(e),a.readAsDataURL(m)})}function kt(m){return new Promise((E,T)=>{const a=new Image;a.onload=()=>E(a),a.onerror=e=>T(e),a.src=m})}function Ne(){if(Ne.cachedResult!==void 0)return Ne.cachedResult;let m=ue.ETC;const{userAgent:E}=navigator;return/Chrom(e|ium)/i.test(E)?m=ue.CHROME:/iP(ad|od|hone)/i.test(E)&&/WebKit/i.test(E)?m=ue.IOS:/Safari/i.test(E)?m=ue.DESKTOP_SAFARI:/Firefox/i.test(E)?m=ue.FIREFOX:(/MSIE/i.test(E)||document.documentMode)&&(m=ue.IE),Ne.cachedResult=m,Ne.cachedResult}function Ot(m,E){const T=Ne(),a=cn[T];let e=m,t=E,c=e*t;const s=e>t?t/e:e/t;for(;c>a*a;){const p=(a+e)/2,x=(a+t)/2;p<x?(t=x,e=x*s):(t=p*s,e=p),c=e*t}return{width:e,height:t}}function Ze(m,E){let T,a;try{if(T=new OffscreenCanvas(m,E),a=T.getContext("2d"),a===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{T=document.createElement("canvas"),a=T.getContext("2d")}return T.width=m,T.height=E,[T,a]}function _t(m,E){const{width:T,height:a}=Ot(m.width,m.height),[e,t]=Ze(T,a);return E&&/jpe?g/.test(E)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(m,0,0,e.width,e.height),e}function ze(){return ze.cachedResult!==void 0||(ze.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),ze.cachedResult}function Ge(m,E={}){return new Promise(function(T,a){let e,t;var c=function(){try{return t=_t(e,E.fileType||m.type),T([e,t])}catch(p){return a(p)}},s=function(p){try{var x=function(r){try{throw r}catch(i){return a(i)}};try{let r;return Nt(m).then(function(i){try{return r=i,kt(r).then(function(n){try{return e=n,function(){try{return c()}catch(l){return a(l)}}()}catch(l){return x(l)}},x)}catch(n){return x(n)}},x)}catch(r){x(r)}}catch(r){return a(r)}};try{if(ze()||[ue.DESKTOP_SAFARI,ue.MOBILE_SAFARI].includes(Ne()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(m).then(function(p){try{return e=p,c()}catch{return s()}},s)}catch{s()}})}function Qe(m,E,T,a,e=1){return new Promise(function(t,c){let s;if(E==="image/png"){let x,r,i;return x=m.getContext("2d"),{data:r}=x.getImageData(0,0,m.width,m.height),i=me.encode([r.buffer],m.width,m.height,4096*e),s=new Blob([i],{type:E}),s.name=T,s.lastModified=a,p.call(this)}{let x=function(){return p.call(this)};if(E==="image/bmp")return new Promise(r=>It.toBlob(m,r)).then((function(r){try{return s=r,s.name=T,s.lastModified=a,x.call(this)}catch(i){return c(i)}}).bind(this),c);{let r=function(){return x.call(this)};if(typeof OffscreenCanvas=="function"&&m instanceof OffscreenCanvas)return m.convertToBlob({type:E,quality:e}).then((function(i){try{return s=i,s.name=T,s.lastModified=a,r.call(this)}catch(n){return c(n)}}).bind(this),c);{let i;return i=m.toDataURL(E,e),rt(i,T,a).then((function(n){try{return s=n,r.call(this)}catch(l){return c(l)}}).bind(this),c)}}}function p(){return t(s)}})}function xe(m){m.width=0,m.height=0}function _e(){return new Promise(function(m,E){let T,a,e,t;return _e.cachedResult!==void 0?m(_e.cachedResult):rt("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(c){try{return T=c,Ge(T).then(function(s){try{return a=s[1],Qe(a,T.type,T.name,T.lastModified).then(function(p){try{return e=p,xe(a),Ge(e).then(function(x){try{return t=x[0],_e.cachedResult=t.width===1&&t.height===2,m(_e.cachedResult)}catch(r){return E(r)}},E)}catch(x){return E(x)}},E)}catch(p){return E(p)}},E)}catch(s){return E(s)}},E)})}function Bt(m){return new Promise((E,T)=>{const a=new Rt;a.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return E(-2);const c=t.byteLength;let s=2;for(;s<c;){if(t.getUint16(s+2,!1)<=8)return E(-1);const p=t.getUint16(s,!1);if(s+=2,p==65505){if(t.getUint32(s+=2,!1)!=1165519206)return E(-1);const x=t.getUint16(s+=6,!1)==18761;s+=t.getUint32(s+4,x);const r=t.getUint16(s,x);s+=2;for(let i=0;i<r;i++)if(t.getUint16(s+12*i,x)==274)return E(t.getUint16(s+12*i+8,x))}else{if((65280&p)!=65280)break;s+=t.getUint16(s,!1)}}return E(-1)},a.onerror=e=>T(e),a.readAsArrayBuffer(m)})}function Mt(m,E){const{width:T}=m,{height:a}=m,{maxWidthOrHeight:e}=E;let t,c=m;return isFinite(e)&&(T>e||a>e)&&([c,t]=Ze(T,a),T>a?(c.width=e,c.height=a/T*e):(c.width=T/a*e,c.height=e),t.drawImage(m,0,0,c.width,c.height),xe(m)),c}function Pt(m,E){const{width:T}=m,{height:a}=m,[e,t]=Ze(T,a);switch(E>4&&E<9?(e.width=a,e.height=T):(e.width=T,e.height=a),E){case 2:t.transform(-1,0,0,1,T,0);break;case 3:t.transform(-1,0,0,-1,T,a);break;case 4:t.transform(1,0,0,-1,0,a);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,a,0);break;case 7:t.transform(0,-1,-1,0,a,T);break;case 8:t.transform(0,-1,1,0,0,T)}return t.drawImage(m,0,0,T,a),xe(m),e}function ft(m,E,T=0){return new Promise(function(a,e){let t,c,s,p,x,r,i,n,l,g,U,I,y,L,B,N,P,b,k,u;function f(v=5){if(E.signal&&E.signal.aborted)throw E.signal.reason;t+=v,E.onProgress(Math.min(t,100))}function w(v){if(E.signal&&E.signal.aborted)throw E.signal.reason;t=Math.min(Math.max(v,t),100),E.onProgress(t)}return t=T,c=E.maxIteration||10,s=1024*E.maxSizeMB*1024,f(),Ge(m,E).then((function(v){try{return[,p]=v,f(),x=Mt(p,E),f(),new Promise(function(A,F){var S;if(!(S=E.exifOrientation))return Bt(m).then((function(d){try{return S=d,C.call(this)}catch(o){return F(o)}}).bind(this),F);function C(){return A(S)}return C.call(this)}).then((function(A){try{return r=A,f(),_e().then((function(F){try{return i=F?x:Pt(x,r),f(),n=E.initialQuality||1,l=E.fileType||m.type,Qe(i,l,m.name,m.lastModified,n).then((function(S){try{{let d=function(){if(c--&&(B>s||B>y)){let M,j;return M=u?.95*k.width:k.width,j=u?.95*k.height:k.height,[P,b]=Ze(M,j),b.drawImage(k,0,0,M,j),n*=l==="image/png"?.85:.95,Qe(P,l,m.name,m.lastModified,n).then(function(R){try{return N=R,xe(k),k=P,B=N.size,w(Math.min(99,Math.floor((L-B)/(L-s)*100))),d}catch(H){return e(H)}},e)}return[1]},o=function(){return xe(k),xe(P),xe(x),xe(i),xe(p),w(100),a(N)};if(g=S,f(),U=g.size>s,I=g.size>m.size,!U&&!I)return w(100),a(g);var C;return y=m.size,L=g.size,B=L,k=i,u=!E.alwaysKeepResolution&&U,(C=(function(M){for(;M;){if(M.then)return void M.then(C,e);try{if(M.pop){if(M.length)return M.pop()?o.call(this):M;M=d}else M=M.call(this)}catch(j){return e(j)}}}).bind(this))(d)}}catch(d){return e(d)}}).bind(this),e)}catch(S){return e(S)}}).bind(this),e)}catch(F){return e(F)}}).bind(this),e)}catch(A){return e(A)}}).bind(this),e)})}const un=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Ye;function dn(m,E){return new Promise((T,a)=>{Ye||(Ye=function(c){const s=[];return s.push(c),URL.createObjectURL(new Blob(s))}(un));const e=new Worker(Ye);e.addEventListener("message",function(c){if(E.signal&&E.signal.aborted)e.terminate();else if(c.data.progress===void 0){if(c.data.error)return a(new Error(c.data.error)),void e.terminate();T(c.data.file),e.terminate()}else E.onProgress(c.data.progress)}),e.addEventListener("error",a),E.signal&&E.signal.addEventListener("abort",()=>{a(E.signal.reason),e.terminate()}),e.postMessage({file:m,imageCompressionLibUrl:E.libURL,options:{...E,onProgress:void 0,signal:void 0}})})}function le(m,E){return new Promise(function(T,a){let e,t,c,s,p,x;if(e={...E},c=0,{onProgress:s}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=l=>{c=l,typeof s=="function"&&s(c)},!(m instanceof Blob||m instanceof fn))return a(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(m.type))return a(new Error("The file given is not an image"));if(x=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||x)return ft(m,e).then((function(l){try{return t=l,n.call(this)}catch(g){return a(g)}}).bind(this),a);var r=(function(){try{return n.call(this)}catch(l){return a(l)}}).bind(this),i=function(l){try{return ft(m,e).then(function(g){try{return t=g,r()}catch(U){return a(U)}},a)}catch(g){return a(g)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",dn(m,e).then(function(l){try{return t=l,r()}catch{return i()}},i)}catch{i()}function n(){try{t.name=m.name,t.lastModified=m.lastModified}catch{}try{e.preserveExif&&m.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===m.type)&&(t=Ut(m,t))}catch{}return T(t)}})}le.getDataUrlFromFile=Nt,le.getFilefromDataUrl=rt,le.loadImage=kt,le.drawImageInCanvas=_t,le.drawFileInCanvas=Ge,le.canvasToFile=Qe,le.getExifOrientation=Bt,le.handleMaxWidthOrHeight=Mt,le.followExifOrientation=Pt,le.cleanupCanvasMemory=xe,le.isAutoOrientationInBrowser=_e,le.approximateBelowMaximumCanvasSizeOfBrowser=Ot,le.copyExifWithoutOrientation=Ut,le.getBrowserName=Ne,le.version="2.0.2";const Lt={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,preserveExif:!0,initialQuality:.8,alwaysKeepResolution:!1},hn=m=>m&&m.type.startsWith("image/"),pn=async(m,E={})=>{try{if(!hn(m))throw new Error("Die ausgewählte Datei ist kein Bild");console.log("Starte Bildkomprimierung:",{originalSize:`${(m.size/(1024*1024)).toFixed(2)}MB`,type:m.type});const T={...Lt,...E},a=await le(m,T);return console.log("Bildkomprimierung abgeschlossen:",{originalSize:`${(m.size/(1024*1024)).toFixed(2)}MB`,compressedSize:`${(a.size/(1024*1024)).toFixed(2)}MB`,compressionRatio:`${((1-a.size/m.size)*100).toFixed(1)}%`}),a}catch(T){throw console.error("Fehler bei der Bildkomprimierung:",T),new Error(`Bildkomprimierung fehlgeschlagen: ${T.message}`)}},ut=async(m,E={})=>{try{if(!m)throw new Error("Keine Datei ausgewählt");return m.size<=(E.maxSizeMB||Lt.maxSizeMB)*1024*1024?(console.log("Keine Komprimierung notwendig, Dateigröße ist bereits optimal"),m):await pn(m,E)}catch(T){throw console.error("Fehler bei der Bildverarbeitung:",T),T}},Dt=({onTypeSelect:m})=>h.jsx("div",{className:"type-selector-screen",children:h.jsxs("div",{className:"type-selector-content",children:[h.jsx("h1",{children:"Wähle dein Sharepic-Format"}),h.jsx("p",{className:"type-selector-intro",children:"Jedes Format ist für einen bestimmten Zweck optimiert."}),h.jsxs("div",{className:"type-options-grid",children:[h.jsxs("div",{className:"type-card",onClick:()=>m(we.THREE_LINES),children:[h.jsx("div",{className:"type-icon",children:"📝"}),h.jsx("h3",{children:"Standard-Sharepic"}),h.jsx("p",{children:"Perfekt für kurze, prägnante Botschaften in drei Zeilen. Ideal für Forderungen oder Statements."})]}),h.jsxs("div",{className:"type-card",onClick:()=>m(we.QUOTE),children:[h.jsx("div",{className:"type-icon",children:"💬"}),h.jsx("h3",{children:"Zitat"}),h.jsx("p",{children:"Gestalte eindrucksvolle Zitate. Optimal für Aussagen und Stellungnahmen."})]})]})]})});Dt.propTypes={onTypeSelect:O.func.isRequired};const gn=(m,E=!1)=>{switch(m){case G.INPUT:return{title:"Thema des Sharepics",content:"Beschreibe dein Thema und gib Details an. Die KI wird dir passende Textvorschläge generieren.",tips:["Je konkreter dein Thema, desto besser die generierten Texte","Füge Details hinzu, um die Texte noch spezifischer zu machen","KI fügt automatisch einen Suchbegriff für ein passendes Unsplash-Hintergrundbild hinzu"]};case G.PREVIEW:return{title:E?"Text auswählen":"Bild- und Sloganauswahl",content:E?"Wähle einen passenden Text für dein Sharepic aus.":"Wähle ein passendes Bild für dein Sharepic aus und passe den Text an.",tips:E?[]:["Tippe auf den Unsplash-Button, um ein passendes Bild aus der Unsplash-Bibliothek zu finden","Lade das Unsplash-Bild herunter und dann hier hoch, um es zu verwenden","Klicke auf 'Alternativen anzeigen', um weitere Textvorschläge zu sehen","Du kannst den Text in den Eingabefeldern weiter anpassen"]};default:return null}};function qt({showHeaderFooter:m=!0,darkMode:E}){const[T,a]=Z.useState(()=>localStorage.getItem("hasSeenSharepicWelcome")==="true"),{state:e,setFile:t,setError:c,updateFormData:s,modifyImage:p,setLottieVisible:x,setAlternatives:r,selectSlogan:i}=dt(),{generateText:n,generateImage:l,loading:g,error:U}=nn(),{renderFormFields:I}=rn(),[y,L]=Z.useState({}),[B,N]=Z.useState(!1);Z.useEffect(()=>{T&&e.currentStep===G.WELCOME&&s({currentStep:G.TYPE_SELECT})},[T,e.currentStep,s]),Z.useEffect(()=>{T||(localStorage.setItem("hasSeenSharepicWelcome","true"),a(!0))},[T]);const P=Z.useCallback(j=>{const R={};return j.thema||(R.thema=Pe.THEMA),j.type||(R.type=Pe.TYPE),L(R),Object.keys(R).length===0},[]),b=Z.useCallback(j=>{const{name:R,value:H}=j.target;s({[R]:H})},[s]),k=Z.useCallback(async j=>{j&&j.preventDefault(),s({loading:!0}),c("");try{if(!P(e.formData))throw new Error(Pe.FORM_VALIDATION_FAILED);if(e.currentStep===G.INPUT){x(!0);const R=await n(e.formData.type,{thema:e.formData.thema,details:e.formData.details,quote:e.formData.quote,name:e.formData.name});if(!R)throw new Error(Pe.NO_TEXT_DATA);e.formData.type==="Zitat"?(await s({...e.formData,quote:R.quote,name:R.name||e.formData.name,currentStep:G.PREVIEW,sloganAlternatives:R.alternatives||[]}),r(R.alternatives||[])):(await s({...R.mainSlogan,type:e.formData.type,currentStep:G.PREVIEW,searchTerms:R.searchTerms,sloganAlternatives:R.alternatives||[]}),r(R.alternatives||[]))}else if(e.currentStep===G.PREVIEW){if(!e.file){c("Bitte wählen Sie ein Bild aus");return}const R=await l({...e.formData,image:e.file});if(!R)throw new Error("Keine Bilddaten empfangen");await s({generatedImageSrc:R,currentStep:G.RESULT})}else if(e.currentStep===G.RESULT){const{fontSize:R,balkenOffset:H,colorScheme:z,credit:q,uploadedImage:D,image:_}=e.formData,W=D||_||e.file;if(!W)throw new Error("Kein Bild zum Modifizieren gefunden");const K=await p({fontSize:R,balkenOffset:H,colorScheme:z,credit:q,image:W});if(!K)throw new Error(Pe.NO_MODIFIED_IMAGE_DATA);await s({generatedImageSrc:K,fontSize:R,balkenOffset:H,colorScheme:z,credit:q,image:W})}}catch(R){c(R.message)}finally{s({loading:!1})}},[e.currentStep,e.formData,P,n,l,p,s,c,x,e.file,e.selectedImage,ut,r,B]);Z.useEffect(()=>{},[e.currentStep,e.isSubmitting,e.currentSubmittingStep,e.isLottieVisible]);const u=Z.useCallback(()=>{e.currentStep===G.RESULT?window.confirm("Möchtest du wirklich zurück zum ersten Schritt? Das generierte Sharepic geht verloren.")&&s({currentStep:G.INPUT,generatedImageSrc:"",uploadedImage:null}):e.currentStep===G.PREVIEW?s({currentStep:G.INPUT,uploadedImage:null}):e.currentStep>G.INPUT&&s({currentStep:e.currentStep-1})},[e.currentStep,s]),f=Z.useCallback(async j=>{try{if(j){t(j);const R=await ut(j),H=R instanceof File?R:new File([R],j.name||"image.jpg",{type:R.type||"image/jpeg"});s({uploadedImage:H,image:H})}}catch(R){c(`Fehler bei der Bildverarbeitung: ${R.message}`)}},[t,s,c]);Z.useEffect(()=>{},[e.file,e.formData.uploadedImage,e.selectedImage,e.currentStep,e.error]);const w=Z.useCallback((j,R)=>{j==="balkenOffset"&&!Array.isArray(R)&&(R=Array.isArray(e.formData.balkenOffset)?e.formData.balkenOffset:Re.DEFAULT_BALKEN_OFFSET),s({[j]:R})},[e.formData.balkenOffset,s]),v=Z.useMemo(()=>{const j=window.innerWidth<=768;return e.currentStep===G.INPUT?Oe.GENERATE_TEXT:e.currentStep===G.PREVIEW?j?Oe.GENERATE_IMAGE_MOBILE:Oe.GENERATE_IMAGE:Oe.MODIFY_IMAGE},[e.currentStep]),A=Z.useMemo(()=>I(e.currentStep,e.formData,b,y),[e.currentStep,e.formData,b,y]),F=Z.useCallback(j=>{e.formData.type==="Zitat"?s({...e.formData,quote:j.quote}):i(j)},[e.formData.type,s,i]),S={loading:e.loading,file:e.file,handleChange:f,error:e.error,allowedTypes:Re.ALLOWED_FILE_TYPES,alternativesButtonProps:{isExpanded:B,onClick:()=>{N(!B)},onSloganSelect:F}},C=gn(e.currentStep,B),d=C?h.jsx(pt,{content:C.content,tips:C.tips}):null,o=Z.useMemo(()=>e.currentStep===G.PREVIEW?h.jsxs(h.Fragment,{children:[d,B&&h.jsx(tt,{currentSlogan:e.formData.type==="Zitat"?{quote:e.formData.quote}:{line1:e.formData.line1,line2:e.formData.line2,line3:e.formData.line3},alternatives:e.formData.sloganAlternatives,onSloganSelect:F})]}):d,[e.currentStep,e.formData,d,B,F]),M=Z.useCallback(j=>{s({type:j,currentStep:G.INPUT})},[s]);return e.currentStep===G.WELCOME&&!T?h.jsx("div",{className:`container ${m?"with-header":""}`,children:h.jsx(Xt,{title:"Sharepic-Grünerator",description:"Erstelle professionelle Sharepics für Social Media. Die KI hilft dir dabei, deine Botschaft optimal zu präsentieren.",stepsTitle:"In drei Schritten zu deinem Sharepic",steps:[{title:"Thema & Text",description:"Gib dein Thema ein und lass die KI einen passenden Text generieren."},{title:"Bild auswählen",description:"Wähle ein passendes Bild aus oder lade dein eigenes hoch."},{title:"Design anpassen",description:"Passe Farben und Schriftgröße deinen Wünschen an."}],onStart:()=>s({currentStep:G.TYPE_SELECT})})}):e.currentStep===G.TYPE_SELECT?h.jsx(Dt,{onTypeSelect:M}):h.jsx(ht,{children:h.jsx(Jt,{feature:"sharepic",children:h.jsx("div",{className:`container ${m?"with-header":""} ${E?"dark-mode":""}`,role:"main","aria-label":"Sharepic Generator",children:h.jsx(Ft,{title:C?C.title:Re.TITLE,onSubmit:k,onBack:u,loading:e.loading||g,error:e.error||U,generatedContent:e.generatedImageSrc||o,useDownloadButton:e.currentStep===G.RESULT,showBackButton:e.currentStep>G.INPUT,submitButtonText:v,currentStep:e.currentStep,isLottieVisible:e.isLottieVisible,formErrors:y,isSubmitting:e.isSubmitting,currentSubmittingStep:e.currentSubmittingStep,credit:e.formData.credit,fileUploadProps:S,fontSize:e.formData.fontSize||Re.DEFAULT_FONT_SIZE,balkenOffset:e.formData.balkenOffset||Re.DEFAULT_BALKEN_OFFSET,colorScheme:e.formData.colorScheme||Re.DEFAULT_COLOR_SCHEME,balkenGruppenOffset:e.formData.balkenGruppenOffset||[0,0],sunflowerOffset:e.formData.sunflowerOffset||[0,0],onControlChange:w,children:A})})})})}qt.propTypes={showHeaderFooter:O.bool,darkMode:O.bool};function En(m){return h.jsx(Gt,{children:h.jsx(ht,{children:h.jsx(qt,{...m})})})}export{En as default};
